# ModuleLoader ê°€ì´ë“œ

IMCAT UIì˜ ëª¨ë“ˆ ë¡œë”ëŠ” JavaScript ëª¨ë“ˆê³¼ CSSë¥¼ ìë™ìœ¼ë¡œ ë¡œë“œí•˜ê³  ìºì‹±í•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

---

## ğŸ¯ í•µì‹¬ ê¸°ëŠ¥

### 1. **ìë™ ê²½ë¡œ ê°ì§€**

- `imcat-ui.js` ë˜ëŠ” `imcat-ui.min.js`ì˜ ìœ„ì¹˜ë¥¼ ìë™ìœ¼ë¡œ ê°ì§€
- `dist` í´ë” ê²½ë¡œë¥¼ ìë™ ê³„ì‚°
- ìˆ˜ë™ ì„¤ì • ë¶ˆí•„ìš”

### 2. **CSS/JS ìë™ ë¡œë“œ**

- ëª¨ë“ˆ JS ë¡œë“œ ì‹œ CSSë„ ìë™ìœ¼ë¡œ ë¡œë“œ
- ì¤‘ë³µ ë¡œë“œ ë°©ì§€
- ë¡œë“œ ìˆœì„œ ë³´ì¥

### 3. **ëª¨ë“ˆ ìºì‹±**

- í•œ ë²ˆ ë¡œë“œëœ ëª¨ë“ˆì€ ë©”ëª¨ë¦¬ì— ìºì‹±
- ë„¤íŠ¸ì›Œí¬ ìš”ì²­ ìµœì†Œí™”
- ì„±ëŠ¥ ìµœì í™”

---

## ğŸ“‚ ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
project/
â”œâ”€â”€ dist/
â”‚   â”œâ”€â”€ imcat-ui.min.js          â† ì½”ì–´ JS
â”‚   â”œâ”€â”€ imcat-ui.css             â† ì½”ì–´ CSS
â”‚   â””â”€â”€ modules/                 â† ëª¨ë“ˆ í´ë”
â”‚       â”œâ”€â”€ theme/
â”‚       â”‚   â”œâ”€â”€ theme.js         â† ëª¨ë“ˆ JS
â”‚       â”‚   â””â”€â”€ theme.css        â† ëª¨ë“ˆ CSS
â”‚       â””â”€â”€ modal/
â”‚           â”œâ”€â”€ modal.js
â”‚           â””â”€â”€ modal.css
â”‚
â”œâ”€â”€ app/
â”‚   â””â”€â”€ index.html               â† ì•± HTML
â”‚
â””â”€â”€ examples/
    â””â”€â”€ index.html               â† ì˜ˆì œ HTML
```

---

## ğŸš€ ê¸°ë³¸ ì‚¬ìš©ë²•

### 1. HTMLì— ì½”ì–´ ë¡œë“œ

```html
<!DOCTYPE html>
<html>
<head>
  <!-- ì½”ì–´ CSS -->
  <link rel="stylesheet" href="../dist/imcat-ui.css">
</head>
<body>
  <!-- ì½”ì–´ JS -->
  <script src="../dist/imcat-ui.min.js"></script>
  
  <script>
    (async () => {
      // ëª¨ë“ˆ ë¡œë“œ (ê²½ë¡œ ìë™ ê°ì§€)
      const Theme = await IMCAT.use('theme');
      
      // ì‚¬ìš©
      const theme = new Theme();
    })();
  </script>
</body>
</html>
```

**ë™ì‘ ê³¼ì •:**
1. `imcat-ui.min.js`ì˜ ìœ„ì¹˜ ê°ì§€: `../dist/imcat-ui.min.js`
2. `dist` í´ë” ì¶”ì¶œ: `../dist`
3. ëª¨ë“ˆ ê²½ë¡œ ê³„ì‚°: `../dist/modules/theme/`
4. CSS ë¡œë“œ: `../dist/modules/theme/theme.css` âœ…
5. JS ë¡œë“œ: `../dist/modules/theme/theme.js` âœ…

---

## ğŸ”„ ìë™ ê²½ë¡œ ê°ì§€ ì•Œê³ ë¦¬ì¦˜

### ê°ì§€ ë¡œì§

```javascript
// ModuleLoader ë‚´ë¶€
_detectDistPath() {
  const scripts = document.getElementsByTagName('script');
  
  for (let script of scripts) {
    if (script.src.includes('imcat-ui')) {
      // ì˜ˆ: "http://localhost:3000/dist/imcat-ui.min.js"
      const match = script.src.match(/(.*)\/imcat-ui(\.min)?\.js/);
      
      if (match) {
        return match[1];  // "http://localhost:3000/dist"
      }
    }
  }
  
  return './dist';  // ê¸°ë³¸ê°’
}
```

### ê²½ë¡œ ì˜ˆì‹œ

| HTML ìœ„ì¹˜ | imcat-ui.js ê²½ë¡œ | ê°ì§€ëœ distPath | ëª¨ë“ˆ ê²½ë¡œ |
|-----------|------------------|-----------------|-----------|
| `app/index.html` | `../dist/imcat-ui.min.js` | `../dist` | `../dist/modules/` |
| `examples/index.html` | `../dist/imcat-ui.min.js` | `../dist` | `../dist/modules/` |
| `index.html` (ë£¨íŠ¸) | `dist/imcat-ui.min.js` | `dist` | `dist/modules/` |
| `pages/home/index.html` | `../../dist/imcat-ui.min.js` | `../../dist` | `../../dist/modules/` |

**í•µì‹¬:** ì–´ë””ì„œë“  `imcat-ui.js`ì˜ ìœ„ì¹˜ë§Œ ì˜¬ë°”ë¥´ë©´ ìë™ìœ¼ë¡œ ëª¨ë“ˆ ê²½ë¡œ ê³„ì‚°! âœ…

---

## ğŸ“– API ë ˆí¼ëŸ°ìŠ¤

### `IMCAT.use(...moduleNames)`

ëª¨ë“ˆì„ ë¡œë“œí•©ë‹ˆë‹¤. (CSS/JS ìë™ ë¡œë“œ)

**ë§¤ê°œë³€ìˆ˜:**
- `...moduleNames` (string[]) - ë¡œë“œí•  ëª¨ë“ˆ ì´ë¦„ë“¤

**ë°˜í™˜ê°’:**
- `Promise<Module>` - ë‹¨ì¼ ëª¨ë“ˆ
- `Promise<Module[]>` - ì—¬ëŸ¬ ëª¨ë“ˆ (ë°°ì—´)

**ì˜ˆì œ:**

```javascript
// ë‹¨ì¼ ëª¨ë“ˆ
const Theme = await IMCAT.use('theme');

// ì—¬ëŸ¬ ëª¨ë“ˆ
const [Theme, Modal, Dropdown] = await IMCAT.use('theme', 'modal', 'dropdown');
```

---

### `IMCAT.loader.preload(...moduleNames)`

ëª¨ë“ˆì„ ì‚¬ì „ ë¡œë“œí•©ë‹ˆë‹¤. (ìºì‹±ë§Œ, ë°˜í™˜ ì—†ìŒ)

**ë§¤ê°œë³€ìˆ˜:**
- `...moduleNames` (string[]) - ì‚¬ì „ ë¡œë“œí•  ëª¨ë“ˆ ì´ë¦„ë“¤

**ë°˜í™˜ê°’:**
- `Promise<void>`

**ì˜ˆì œ:**

```javascript
// í˜ì´ì§€ ë¡œë“œ ì‹œ ë¯¸ë¦¬ ìºì‹±
await IMCAT.loader.preload('modal', 'dropdown', 'tooltip');

// ë‚˜ì¤‘ì— ë¹ ë¥´ê²Œ ì‚¬ìš© (ë„¤íŠ¸ì›Œí¬ ìš”ì²­ ì—†ìŒ)
const Modal = await IMCAT.use('modal');  // ì¦‰ì‹œ ë°˜í™˜
```

---

### `IMCAT.loader.basePath`

ëª¨ë“ˆ í´ë”ì˜ ê¸°ë³¸ ê²½ë¡œì…ë‹ˆë‹¤. (ìë™ ì„¤ì •ë¨)

**íƒ€ì…:** `string`

**ê¸°ë³¸ê°’:** `{distPath}/modules`

**ì½ê¸° ì „ìš©:** ì•„ë‹ˆì˜¤ (ìˆ˜ë™ ì„¤ì • ê°€ëŠ¥)

**ì˜ˆì œ:**

```javascript
// ìë™ ê°ì§€ëœ ê²½ë¡œ í™•ì¸
console.log(IMCAT.loader.basePath);
// "../dist/modules"

// ìˆ˜ë™ ì„¤ì • (íŠ¹ìˆ˜í•œ ê²½ìš°ë§Œ)
IMCAT.loader.basePath = '/custom/path/modules';
```

---

### `IMCAT.loader.distPath`

dist í´ë”ì˜ ê²½ë¡œì…ë‹ˆë‹¤. (ìë™ ê°ì§€ë¨)

**íƒ€ì…:** `string`

**ê¸°ë³¸ê°’:** ìë™ ê°ì§€

**ì½ê¸° ì „ìš©:** ì•„ë‹ˆì˜¤ (ìˆ˜ë™ ì„¤ì • ê°€ëŠ¥)

**ì˜ˆì œ:**

```javascript
// ìë™ ê°ì§€ëœ dist ê²½ë¡œ í™•ì¸
console.log(IMCAT.loader.distPath);
// "../dist"
```

---

## ğŸ¨ ê³ ê¸‰ ì‚¬ìš©ë²•

### 1. **ìˆ˜ë™ ê²½ë¡œ ì„¤ì •**

íŠ¹ìˆ˜í•œ ìƒí™©ì—ì„œë§Œ ì‚¬ìš©í•˜ì„¸ìš”.

```javascript
// ì˜µì…˜ 1: distPath ì„¤ì • (ì´ˆê¸°í™” ì‹œ)
// ì£¼ì˜: ì½”ì–´ ì´ˆê¸°í™” ì „ì— ì„¤ì • ë¶ˆê°€ëŠ¥

// ì˜µì…˜ 2: basePath ì§ì ‘ ì„¤ì •
IMCAT.loader.basePath = '/custom/modules';
```

### 2. **ëª¨ë“ˆ ìºì‹œ í™•ì¸**

```javascript
// ìºì‹œëœ ëª¨ë“ˆ í™•ì¸
console.log(IMCAT.loader.modules);
// Map { 'theme' => ThemeClass, 'modal' => ModalClass }

// ë¡œë“œëœ CSS í™•ì¸
console.log(IMCAT.loader.loadedCSS);
// Set { 'theme', 'modal' }
```

### 3. **ì¡°ê±´ë¶€ ëª¨ë“ˆ ë¡œë“œ**

```javascript
// ì‚¬ìš©ì ê¶Œí•œì— ë”°ë¼ ëª¨ë“ˆ ë¡œë“œ
if (user.isAdmin) {
  const AdminPanel = await IMCAT.use('admin-panel');
}

// ê¸°ëŠ¥ í”Œë˜ê·¸ì— ë”°ë¼
if (features.darkMode) {
  const Theme = await IMCAT.use('theme');
}
```

### 4. **ì§€ì—° ë¡œë“œ (Lazy Loading)**

```javascript
// ë²„íŠ¼ í´ë¦­ ì‹œ ëª¨ë“ˆ ë¡œë“œ
document.getElementById('openModal').addEventListener('click', async () => {
  const Modal = await IMCAT.use('modal');
  const modal = new Modal({ title: 'Hello' });
  modal.show();
});
```

---

## ğŸ” ë””ë²„ê¹…

### 1. **ê²½ë¡œ í™•ì¸**

```javascript
// í˜„ì¬ ì„¤ì • í™•ì¸
console.log('Dist Path:', IMCAT.loader.distPath);
console.log('Base Path:', IMCAT.loader.basePath);

// ì˜ˆìƒ ëª¨ë“ˆ ê²½ë¡œ
const moduleName = 'theme';
console.log('Expected Path:', `${IMCAT.loader.basePath}/${moduleName}/${moduleName}.js`);
```

### 2. **ë¡œë“œ ì˜¤ë¥˜ ì²˜ë¦¬**

```javascript
try {
  const Theme = await IMCAT.use('theme');
} catch (error) {
  console.error('Failed to load theme:', error);
  
  // ì˜¤ë¥˜ ì •ë³´
  console.log('Error Details:', {
    moduleName: 'theme',
    expectedPath: `${IMCAT.loader.basePath}/theme/theme.js`,
    distPath: IMCAT.loader.distPath
  });
}
```

### 3. **ë„¤íŠ¸ì›Œí¬ íƒ­ í™•ì¸**

ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ì˜ ë„¤íŠ¸ì›Œí¬ íƒ­ì—ì„œ í™•ì¸:

- âœ… `200 OK` - ì •ìƒ ë¡œë“œ
- âŒ `404 Not Found` - ê²½ë¡œ ì˜¤ë¥˜
- âŒ `CORS Error` - í¬ë¡œìŠ¤ ì˜¤ë¦¬ì§„ ë¬¸ì œ

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

### 1. **íŒŒì¼ëª… ê·œì¹™**

ëª¨ë“ˆ íŒŒì¼ëª…ì€ ë°˜ë“œì‹œ ëª¨ë“ˆëª…ê³¼ ì¼ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.

```
âœ… ì˜¬ë°”ë¥¸ êµ¬ì¡°:
modules/
â””â”€â”€ theme/
    â”œâ”€â”€ theme.js    â† ëª¨ë“ˆëª…ê³¼ ë™ì¼
    â””â”€â”€ theme.css   â† ëª¨ë“ˆëª…ê³¼ ë™ì¼

âŒ ì˜ëª»ëœ êµ¬ì¡°:
modules/
â””â”€â”€ theme/
    â”œâ”€â”€ index.js    â† ì˜ëª»ë¨
    â””â”€â”€ style.css   â† ì˜ëª»ë¨
```

### 2. **ìƒëŒ€ ê²½ë¡œ**

`imcat-ui.js`ëŠ” í•­ìƒ ìƒëŒ€ ê²½ë¡œë¡œ ë¡œë“œí•˜ì„¸ìš”.

```html
âœ… ì˜¬ë°”ë¦„:
<script src="../dist/imcat-ui.min.js"></script>
<script src="./dist/imcat-ui.min.js"></script>

âŒ ì˜ëª»ë¨:
<script src="http://localhost:3000/dist/imcat-ui.min.js"></script>
```

### 3. **CDN ì‚¬ìš© ì‹œ**

CDNì—ì„œ ë¡œë“œí•  ë•ŒëŠ” ìˆ˜ë™ ì„¤ì • í•„ìš”:

```html
<script src="https://cdn.example.com/imcat-ui.min.js"></script>

<script>
  // CDNì—ì„œëŠ” ìë™ ê°ì§€ ì•ˆ ë¨
  IMCAT.loader.basePath = 'https://cdn.example.com/modules';
  
  const Theme = await IMCAT.use('theme');
</script>
```

---

## ğŸ’¡ ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤

### 1. **ì´ˆê¸° ë¡œë“œ ìµœì†Œí™”**

```javascript
// í•„ìš”í•œ ëª¨ë“ˆë§Œ ë¡œë“œ
const Theme = await IMCAT.use('theme');

// ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ëª¨ë“ˆì€ ë¡œë“œí•˜ì§€ ì•ŠìŒ
// const Modal = await IMCAT.use('modal');  // ì£¼ì„ ì²˜ë¦¬
```

### 2. **Preload í™œìš©**

```javascript
// ì•± ì´ˆê¸°í™” ì‹œ ìì£¼ ì‚¬ìš©í•˜ëŠ” ëª¨ë“ˆ ì‚¬ì „ ë¡œë“œ
document.addEventListener('DOMContentLoaded', async () => {
  await IMCAT.loader.preload('theme', 'notification');
  
  // ì´í›„ ë¹ ë¥´ê²Œ ì‚¬ìš©
  const Theme = await IMCAT.use('theme');
});
```

### 3. **ì˜¤ë¥˜ ì²˜ë¦¬**

```javascript
// ëª¨ë“ˆ ë¡œë“œ ì‹¤íŒ¨ì— ëŒ€ë¹„
async function loadTheme() {
  try {
    const Theme = await IMCAT.use('theme');
    return new Theme();
  } catch (error) {
    console.error('Theme load failed:', error);
    // ê¸°ë³¸ í…Œë§ˆë¡œ í´ë°±
    return null;
  }
}
```

---

## ğŸ“š ê´€ë ¨ ë¬¸ì„œ

- [API ë ˆí¼ëŸ°ìŠ¤](./API_ë ˆí¼ëŸ°ìŠ¤.md) - ì „ì²´ API ë¬¸ì„œ
- [ëª¨ë“ˆ ì‹œìŠ¤í…œ ì„¤ê³„ì„œ](./ëª¨ë“ˆ_ì‹œìŠ¤í…œ_ì„¤ê³„ì„œ.md) - ëª¨ë“ˆ ê°œë°œ ê°€ì´ë“œ
- [ë¹Œë“œ ê°€ì´ë“œ](./ë¹Œë“œ_ê°€ì´ë“œ.md) - ë¹Œë“œ í”„ë¡œì„¸ìŠ¤

---

## ğŸ‰ ìš”ì•½

### âœ… ìë™ìœ¼ë¡œ ì²˜ë¦¬ë˜ëŠ” ê²ƒë“¤

1. **dist í´ë” ê²½ë¡œ ê°ì§€** - `imcat-ui.js` ìœ„ì¹˜ì—ì„œ ìë™ ê³„ì‚°
2. **ëª¨ë“ˆ ê²½ë¡œ ê³„ì‚°** - `{distPath}/modules/{moduleName}/`
3. **CSS ìë™ ë¡œë“œ** - JS ë¡œë“œ ì‹œ CSSë„ í•¨ê»˜ ë¡œë“œ
4. **ëª¨ë“ˆ ìºì‹±** - ì¤‘ë³µ ë¡œë“œ ë°©ì§€

### âŒ ìˆ˜ë™ ì„¤ì •ì´ í•„ìš”í•œ ê²½ìš°

1. **CDN ì‚¬ìš©** - ì ˆëŒ€ URL ì‚¬ìš© ì‹œ
2. **íŠ¹ìˆ˜í•œ ë””ë ‰í† ë¦¬ êµ¬ì¡°** - í‘œì¤€ê³¼ ë‹¤ë¥¸ êµ¬ì¡° ì‚¬ìš© ì‹œ
3. **ê°œë°œ í™˜ê²½** - ì†ŒìŠ¤ íŒŒì¼ ì§ì ‘ ë¡œë“œ ì‹œ

**ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ì•„ë¬´ ì„¤ì • ì—†ì´ ë°”ë¡œ ì‘ë™í•©ë‹ˆë‹¤!** ğŸš€

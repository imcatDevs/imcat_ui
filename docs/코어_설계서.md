# IMCAT UI ì½”ì–´ ì•„í‚¤í…ì²˜ ì„¤ê³„ì„œ

## ğŸ“‹ ê°œìš”

ë³¸ ë¬¸ì„œëŠ” IMCAT UI í”„ë ˆì„ì›Œí¬ì˜ ì½”ì–´ ëª¨ë“ˆ ìƒì„¸ ì„¤ê³„ë¥¼ ë‹¤ë£¹ë‹ˆë‹¤.
ì½”ì–´ëŠ” í•­ìƒ ë¡œë“œë˜ë©° í”„ë ˆì„ì›Œí¬ì˜ ê¸°ë°˜ì´ ë˜ëŠ” í•„ìˆ˜ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.

**ì½”ì–´ í¬ê¸° ëª©í‘œ:** < 15KB (minified + gzipped)

---

## ğŸ—ï¸ ì½”ì–´ ëª¨ë“ˆ êµ¬ì¡°

```text
imcat-ui/core/
â”œâ”€â”€ index.js        # ì½”ì–´ ì§„ì…ì , ëª¨ë“  ëª¨ë“ˆ í†µí•©
â”œâ”€â”€ dom.js          # DOM ì¡°ì‘ ìœ í‹¸ë¦¬í‹°
â”œâ”€â”€ event.js        # ì´ë²¤íŠ¸ ì‹œìŠ¤í…œ
â”œâ”€â”€ loader.js       # ë™ì  ëª¨ë“ˆ ë¡œë”
â”œâ”€â”€ router.js       # SPA ë·° ë¼ìš°í„°
â”œâ”€â”€ loading.js      # ë¡œë”© ì¸ë””ì¼€ì´í„°
â”œâ”€â”€ security.js     # XSS ë³´ì•ˆ í•„í„°
â””â”€â”€ utils.js        # ê¸°ë³¸ ìœ í‹¸ë¦¬í‹°
```

---

## 1ï¸âƒ£ Core Entry Point (index.js)

### ëª©ì 

ëª¨ë“  ì½”ì–´ ëª¨ë“ˆì„ í†µí•©í•˜ê³  ì „ì—­ IMCAT ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

### ì„¤ê³„

```javascript
/**
 * IMCAT UI ì½”ì–´ ì§„ì…ì 
 * @module core/index
 */

import { DOM } from './dom.js';
import { EventBus } from './event.js';
import { ModuleLoader } from './loader.js';
import { ViewRouter } from './router.js';
import { LoadingIndicator } from './loading.js';
import { Security } from './security.js';
import { Utils } from './utils.js';

/**
 * IMCAT ì „ì—­ ê°ì²´
 */
class IMCAT {
  constructor() {
    // ì½”ì–´ ëª¨ë“ˆ ì´ˆê¸°í™”
    this.dom = new DOM();
    this.event = new EventBus();
    this.loader = new ModuleLoader();
    this.view = new ViewRouter();
    this.loading = new LoadingIndicator();
    this.security = new Security();
    this.utils = new Utils();
    
    // ì´ˆê¸°í™”
    this._init();
  }
  
  /**
   * ì´ˆê¸°í™”
   * @private
   */
  _init() {
    // DOM ì¤€ë¹„ ëŒ€ê¸°
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', () => this._onReady());
    } else {
      this._onReady();
    }
  }
  
  /**
   * DOM ì¤€ë¹„ ì™„ë£Œ í•¸ë“¤ëŸ¬
   * @private
   */
  _onReady() {
    // ë·° ë¼ìš°í„° ì´ˆê¸°í™”
    this.view.init();
    
    // catui-href ë§í¬ ìë™ ë°”ì¸ë”©
    this._bindSPALinks();
  }
  
  /**
   * SPA ë§í¬ ìë™ ë°”ì¸ë”©
   * @private
   */
  _bindSPALinks() {
    document.addEventListener('click', (e) => {
      const link = e.target.closest('[catui-href]');
      if (link) {
        e.preventDefault();
        const path = link.getAttribute('catui-href');
        this.view.navigate(path);
      }
    });
  }
}

// ì „ì—­ IMCAT ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
const imcat = new IMCAT();

// ì„ íƒì í•¨ìˆ˜ë¡œë„ ì‚¬ìš© ê°€ëŠ¥
const IMCAT = function(selector) {
  return imcat.dom.select(selector);
};

// ì½”ì–´ API ë°”ì¸ë”©
Object.assign(IMCAT, {
  // DOM
  create: (...args) => imcat.dom.create(...args),
  
  // ëª¨ë“ˆ ë¡œë”
  use: (...args) => imcat.loader.load(...args),
  
  // ë·° ë¼ìš°í„°
  view: imcat.view,
  
  // ë¡œë”©
  loading: imcat.loading,
  
  // ë³´ì•ˆ
  escape: (...args) => imcat.security.escape(...args),
  sanitize: (...args) => imcat.security.sanitize(...args),
  isSafeUrl: (...args) => imcat.security.isSafeUrl(...args),
  validatePath: (...args) => imcat.security.validatePath(...args),
  isSafeFilename: (...args) => imcat.security.isSafeFilename(...args),
  sanitizeParam: (...args) => imcat.security.sanitizeParam(...args),
  
  // ì´ë²¤íŠ¸
  on: (...args) => imcat.event.on(...args),
  off: (...args) => imcat.event.off(...args),
  emit: (...args) => imcat.event.emit(...args),
  
  // ìœ í‹¸ë¦¬í‹°
  ...imcat.utils
});

export default IMCAT;
```

### ì£¼ìš” ê¸°ëŠ¥

1. **ì „ì—­ ê°ì²´ ìƒì„±**
   - `IMCAT()` í•¨ìˆ˜ë¡œ DOM ì„ íƒ
   - `IMCAT.use()` ë¡œ ëª¨ë“ˆ ë¡œë“œ
   - `IMCAT.view` ë¡œ ë¼ìš°íŒ…

2. **ìë™ ì´ˆê¸°í™”**
   - DOM ì¤€ë¹„ ì™„ë£Œ ëŒ€ê¸°
   - SPA ë§í¬ ìë™ ë°”ì¸ë”©
   - ë·° ë¼ìš°í„° ì´ˆê¸°í™”

3. **API í†µí•©**
   - ëª¨ë“  ì½”ì–´ ê¸°ëŠ¥ì„ IMCAT ê°ì²´ì— ë°”ì¸ë”©
   - ì¼ê´€ëœ API ì œê³µ

---

## 2ï¸âƒ£ DOM Module (dom.js)

### DOM ëª¨ë“ˆ ëª©ì 

jQuery ìŠ¤íƒ€ì¼ì˜ DOM ì¡°ì‘ ìœ í‹¸ë¦¬í‹°ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

### DOM ëª¨ë“ˆ ì„¤ê³„

```javascript
/**
 * DOM ì¡°ì‘ ìœ í‹¸ë¦¬í‹°
 * @module core/dom
 */

import { Security } from './security.js';

/**
 * DOM Element Wrapper
 */
class DOMElement {
  constructor(elements) {
    this.elements = Array.isArray(elements) ? elements : [elements];
    this.length = this.elements.length;
  }
  
  /**
   * ê° ìš”ì†Œì— ëŒ€í•´ í•¨ìˆ˜ ì‹¤í–‰
   */
  each(callback) {
    this.elements.forEach((el, index) => callback.call(el, el, index));
    return this;
  }
  
  /**
   * í´ë˜ìŠ¤ ì¶”ê°€
   */
  addClass(className) {
    return this.each(el => el.classList.add(className));
  }
  
  /**
   * í´ë˜ìŠ¤ ì œê±°
   */
  removeClass(className) {
    return this.each(el => el.classList.remove(className));
  }
  
  /**
   * í´ë˜ìŠ¤ í† ê¸€
   */
  toggleClass(className) {
    return this.each(el => el.classList.toggle(className));
  }
  
  /**
   * í´ë˜ìŠ¤ í¬í•¨ ì—¬ë¶€
   */
  hasClass(className) {
    return this.elements.some(el => el.classList.contains(className));
  }
  
  /**
   * í…ìŠ¤íŠ¸ ì„¤ì •/ì¡°íšŒ (ìë™ ì´ìŠ¤ì¼€ì´í”„)
   */
  text(value) {
    if (value === undefined) {
      return this.elements[0]?.textContent || '';
    }
    // ìë™ ì´ìŠ¤ì¼€ì´í”„
    const escaped = Security.escape(value);
    return this.each(el => el.textContent = escaped);
  }
  
  /**
   * HTML ì„¤ì •/ì¡°íšŒ (ìë™ ìƒˆë‹ˆíƒ€ì´ì§•)
   */
  html(value) {
    if (value === undefined) {
      return this.elements[0]?.innerHTML || '';
    }
    // ìë™ ìƒˆë‹ˆíƒ€ì´ì§•
    const sanitized = Security.sanitize(value);
    return this.each(el => el.innerHTML = sanitized);
  }
  
  /**
   * ì›ë³¸ HTML ì„¤ì • (ìƒˆë‹ˆíƒ€ì´ì§• ì—†ìŒ)
   * ì£¼ì˜: ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì†ŒìŠ¤ì—ì„œë§Œ ì‚¬ìš©!
   */
  rawHtml(value) {
    return this.each(el => el.innerHTML = value);
  }
  
  /**
   * ì†ì„± ì„¤ì •/ì¡°íšŒ (ìë™ ì´ìŠ¤ì¼€ì´í”„)
   */
  attr(name, value) {
    if (value === undefined) {
      return this.elements[0]?.getAttribute(name);
    }
    // ìë™ ì´ìŠ¤ì¼€ì´í”„
    const escaped = Security.escape(value);
    return this.each(el => el.setAttribute(name, escaped));
  }
  
  /**
   * ì†ì„± ì œê±°
   */
  removeAttr(name) {
    return this.each(el => el.removeAttribute(name));
  }
  
  /**
   * ë°ì´í„° ì†ì„± ì„¤ì •/ì¡°íšŒ
   */
  data(key, value) {
    if (value === undefined) {
      return this.elements[0]?.dataset[key];
    }
    return this.each(el => el.dataset[key] = value);
  }
  
  /**
   * CSS ìŠ¤íƒ€ì¼ ì„¤ì •/ì¡°íšŒ
   */
  css(property, value) {
    if (typeof property === 'object') {
      // ì—¬ëŸ¬ ì†ì„± ì„¤ì •
      return this.each(el => {
        Object.entries(property).forEach(([prop, val]) => {
          el.style[prop] = Security.sanitizeCSS(val);
        });
      });
    }
    
    if (value === undefined) {
      return getComputedStyle(this.elements[0])[property];
    }
    
    // ìœ„í—˜í•œ CSS ê°’ í•„í„°ë§
    const sanitized = Security.sanitizeCSS(value);
    return this.each(el => el.style[property] = sanitized);
  }
  
  /**
   * ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
   */
  on(event, selector, handler) {
    // ì¸ì ì²˜ë¦¬
    if (typeof selector === 'function') {
      handler = selector;
      selector = null;
    }
    
    return this.each(el => {
      if (selector) {
        // ì´ë²¤íŠ¸ ìœ„ì„
        const delegateHandler = (e) => {
          const target = e.target.closest(selector);
          if (target && el.contains(target)) {
            handler.call(target, e);
          }
        };
        el.addEventListener(event, delegateHandler);
        // ë‚˜ì¤‘ì— ì œê±°í•  ìˆ˜ ìˆë„ë¡ ì €ì¥
        if (!el._delegates) el._delegates = new Map();
        el._delegates.set(handler, delegateHandler);
      } else {
        el.addEventListener(event, handler);
      }
    });
  }
  
  /**
   * ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì œê±°
   */
  off(event, handler) {
    return this.each(el => {
      if (el._delegates?.has(handler)) {
        el.removeEventListener(event, el._delegates.get(handler));
        el._delegates.delete(handler);
      } else {
        el.removeEventListener(event, handler);
      }
    });
  }
  
  /**
   * ë³´ì´ê¸°
   */
  show() {
    return this.each(el => el.style.display = '');
  }
  
  /**
   * ìˆ¨ê¸°ê¸°
   */
  hide() {
    return this.each(el => el.style.display = 'none');
  }
  
  /**
   * í† ê¸€
   */
  toggle() {
    return this.each(el => {
      el.style.display = el.style.display === 'none' ? '' : 'none';
    });
  }
  
  /**
   * ìì‹ ìš”ì†Œ ì¶”ê°€
   */
  append(content) {
    return this.each(el => {
      if (typeof content === 'string') {
        const sanitized = Security.sanitize(content);
        el.insertAdjacentHTML('beforeend', sanitized);
      } else if (content instanceof DOMElement) {
        content.elements.forEach(child => el.appendChild(child));
      } else if (content instanceof HTMLElement) {
        el.appendChild(content);
      }
    });
  }
  
  /**
   * ë¶€ëª¨ ìš”ì†Œì— ì¶”ê°€
   */
  appendTo(parent) {
    const parentEl = typeof parent === 'string' 
      ? document.querySelector(parent) 
      : parent;
    
    if (parentEl) {
      this.elements.forEach(el => parentEl.appendChild(el));
    }
    return this;
  }
  
  /**
   * ìš”ì†Œ ì œê±°
   */
  remove() {
    return this.each(el => el.remove());
  }
  
  /**
   * í•˜ìœ„ ìš”ì†Œ ê²€ìƒ‰
   */
  find(selector) {
    const found = [];
    this.each(el => {
      found.push(...el.querySelectorAll(selector));
    });
    return new DOMElement(found);
  }
  
  /**
   * ë¶€ëª¨ ìš”ì†Œ ê²€ìƒ‰
   */
  parent() {
    const parents = this.elements.map(el => el.parentElement).filter(Boolean);
    return new DOMElement(parents);
  }
  
  /**
   * ê°€ì¥ ê°€ê¹Œìš´ ì¡°ìƒ ìš”ì†Œ ê²€ìƒ‰
   */
  closest(selector) {
    const found = this.elements.map(el => el.closest(selector)).filter(Boolean);
    return new DOMElement(found);
  }
}

/**
 * DOM ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤
 */
export class DOM {
  /**
   * ìš”ì†Œ ì„ íƒ
   */
  select(selector) {
    if (!selector) return new DOMElement([]);
    
    if (typeof selector === 'string') {
      const elements = Array.from(document.querySelectorAll(selector));
      return new DOMElement(elements);
    }
    
    if (selector instanceof HTMLElement) {
      return new DOMElement([selector]);
    }
    
    if (selector instanceof DOMElement) {
      return selector;
    }
    
    return new DOMElement([]);
  }
  
  /**
   * ìƒˆ ìš”ì†Œ ìƒì„±
   */
  create(tagName, attributes = {}) {
    const el = document.createElement(tagName);
    
    Object.entries(attributes).forEach(([key, value]) => {
      if (key === 'class') {
        el.className = value;
      } else if (key === 'html') {
        el.innerHTML = Security.sanitize(value);
      } else if (key === 'text') {
        el.textContent = value;
      } else {
        el.setAttribute(key, Security.escape(value));
      }
    });
    
    return new DOMElement([el]);
  }
}
```

### DOM ëª¨ë“ˆ ì£¼ìš” ê¸°ëŠ¥

1. **ìë™ ë³´ì•ˆ ì²˜ë¦¬**
   - `.text()` - ìë™ ì´ìŠ¤ì¼€ì´í”„
   - `.html()` - ìë™ ìƒˆë‹ˆíƒ€ì´ì§•
   - `.attr()` - ì†ì„± ê°’ ì´ìŠ¤ì¼€ì´í”„
   - `.css()` - CSS ì¸ì ì…˜ ë°©ì§€

2. **ì²´ì´ë‹ ì§€ì›**
   - jQuery ìŠ¤íƒ€ì¼ì˜ ë©”ì„œë“œ ì²´ì´ë‹
   - ì§ê´€ì ì¸ API

3. **ì´ë²¤íŠ¸ ìœ„ì„**
   - íš¨ìœ¨ì ì¸ ì´ë²¤íŠ¸ ì²˜ë¦¬
   - ë™ì  ìš”ì†Œ ì§€ì›

---

## 3ï¸âƒ£ Event Module (event.js)

### Event ëª¨ë“ˆ ëª©ì 

ì»¤ìŠ¤í…€ ì´ë²¤íŠ¸ ì‹œìŠ¤í…œê³¼ ì´ë²¤íŠ¸ ë²„ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

### Event ëª¨ë“ˆ ì„¤ê³„

```javascript
/**
 * ì´ë²¤íŠ¸ ì‹œìŠ¤í…œ
 * @module core/event
 */

/**
 * ì´ë²¤íŠ¸ ë²„ìŠ¤
 */
export class EventBus {
  constructor() {
    this.events = new Map();
  }
  
  /**
   * ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
   */
  on(event, handler) {
    if (!this.events.has(event)) {
      this.events.set(event, []);
    }
    this.events.get(event).push(handler);
    
    // êµ¬ë… ì·¨ì†Œ í•¨ìˆ˜ ë°˜í™˜
    return () => this.off(event, handler);
  }
  
  /**
   * ì¼íšŒì„± ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
   */
  once(event, handler) {
    const wrapper = (...args) => {
      handler(...args);
      this.off(event, wrapper);
    };
    return this.on(event, wrapper);
  }
  
  /**
   * ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì œê±°
   */
  off(event, handler) {
    if (!this.events.has(event)) return;
    
    if (handler) {
      const handlers = this.events.get(event);
      const index = handlers.indexOf(handler);
      if (index !== -1) {
        handlers.splice(index, 1);
      }
    } else {
      this.events.delete(event);
    }
  }
  
  /**
   * ì´ë²¤íŠ¸ ë°œìƒ
   */
  emit(event, ...args) {
    if (!this.events.has(event)) return;
    
    this.events.get(event).forEach(handler => {
      try {
        handler(...args);
      } catch (error) {
        console.error(`Error in event handler for "${event}":`, error);
      }
    });
  }
  
  /**
   * ëª¨ë“  ë¦¬ìŠ¤ë„ˆ ì œê±°
   */
  clear() {
    this.events.clear();
  }
}
```

### Event ëª¨ë“ˆ ì£¼ìš” ê¸°ëŠ¥

1. **ì´ë²¤íŠ¸ êµ¬ë…/ë°œí–‰**
   - `on()` - ì´ë²¤íŠ¸ êµ¬ë…
   - `once()` - ì¼íšŒì„± êµ¬ë…
   - `emit()` - ì´ë²¤íŠ¸ ë°œí–‰
   - `off()` - êµ¬ë… ì·¨ì†Œ

2. **ì—ëŸ¬ í•¸ë“¤ë§**
   - í•¸ë“¤ëŸ¬ ì—ëŸ¬ ê²©ë¦¬
   - ì½˜ì†” ë¡œê·¸ ì¶œë ¥

---

## 4ï¸âƒ£ Module Loader (loader.js)

### Loader ëª¨ë“ˆ ëª©ì 

ë™ì  ëª¨ë“ˆ ë¡œë”©ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.

### Loader ëª¨ë“ˆ ì„¤ê³„

```javascript
/**
 * ë™ì  ëª¨ë“ˆ ë¡œë”
 * @module core/loader
 */

import { LoadingIndicator } from './loading.js';

/**
 * ëª¨ë“ˆ ë¡œë”
 */
export class ModuleLoader {
  constructor() {
    this.modules = new Map();
    this.loading = new Map();
    this.baseUrl = './modules/';
  }
  
  /**
   * ëª¨ë“ˆ ë¡œë“œ
   */
  async load(...moduleNames) {
    // ë¡œë”© í‘œì‹œ
    LoadingIndicator.show();
    
    try {
      const promises = moduleNames.map(name => this._loadModule(name));
      const modules = await Promise.all(promises);
      
      // ë‹¨ì¼ ëª¨ë“ˆì´ë©´ ë°°ì—´ì´ ì•„ë‹Œ ê°ì²´ ë°˜í™˜
      return modules.length === 1 ? modules[0] : modules;
    } finally {
      LoadingIndicator.hide();
    }
  }
  
  /**
   * ë‹¨ì¼ ëª¨ë“ˆ ë¡œë“œ
   * @private
   */
  async _loadModule(name) {
    // ì´ë¯¸ ë¡œë“œë¨
    if (this.modules.has(name)) {
      return this.modules.get(name);
    }
    
    // ë¡œë”© ì¤‘
    if (this.loading.has(name)) {
      return this.loading.get(name);
    }
    
    // ìƒˆë¡œ ë¡œë“œ
    const promise = this._fetchModule(name);
    this.loading.set(name, promise);
    
    try {
      const module = await promise;
      this.modules.set(name, module);
      this.loading.delete(name);
      return module;
    } catch (error) {
      this.loading.delete(name);
      throw new Error(`Failed to load module "${name}": ${error.message}`);
    }
  }
  
  /**
   * ëª¨ë“ˆ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°
   * @private
   */
  async _fetchModule(name) {
    const url = `${this.baseUrl}${name}/${name}.js`;
    
    try {
      const module = await import(url);
      
      // CSSë„ ìë™ ë¡œë“œ
      await this._loadCSS(name);
      
      return module.default || module;
    } catch (error) {
      throw error;
    }
  }
  
  /**
   * ëª¨ë“ˆ CSS ë¡œë“œ
   * @private
   */
  async _loadCSS(name) {
    const cssUrl = `${this.baseUrl}${name}/${name}.css`;
    
    // ì´ë¯¸ ë¡œë“œë˜ì—ˆëŠ”ì§€ í™•ì¸
    if (document.querySelector(`link[href="${cssUrl}"]`)) {
      return;
    }
    
    return new Promise((resolve, reject) => {
      const link = document.createElement('link');
      link.rel = 'stylesheet';
      link.href = cssUrl;
      link.onload = resolve;
      link.onerror = () => {
        // CSSëŠ” ì„ íƒì ì´ë¯€ë¡œ ì—ëŸ¬ ë¬´ì‹œ
        resolve();
      };
      document.head.appendChild(link);
    });
  }
  
  /**
   * ë² ì´ìŠ¤ URL ì„¤ì •
   */
  setBaseUrl(url) {
    this.baseUrl = url.endsWith('/') ? url : `${url}/`;
  }
}
```

### Loader ëª¨ë“ˆ ì£¼ìš” ê¸°ëŠ¥

1. **ë™ì  import**
   - ES6 ë™ì  import ì‚¬ìš©
   - ëª¨ë“ˆ ìºì‹±
   - ì¤‘ë³µ ë¡œë”© ë°©ì§€

2. **ìë™ CSS ë¡œë“œ**
   - ëª¨ë“ˆê³¼ í•¨ê»˜ CSS ìë™ ë¡œë“œ
   - ì¤‘ë³µ ë¡œë“œ ë°©ì§€

3. **ë¡œë”© í‘œì‹œ**
   - ëª¨ë“ˆ ë¡œë“œ ì‹œ ìë™ ë¡œë”© í‘œì‹œ

---

## 5ï¸âƒ£ View Router (router.js)

### Router ëª¨ë“ˆ ëª©ì 

SPA ë·° ë¼ìš°íŒ…ì„ ì œê³µí•©ë‹ˆë‹¤. ë¼ìš°íŠ¸ ì„¤ì • ì—†ì´ íŒŒì¼ ê²½ë¡œ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•©ë‹ˆë‹¤.

### Router ëª¨ë“ˆ ì„¤ê³„

```javascript
/**
 * SPA ë·° ë¼ìš°í„°
 * @module core/router
 */

import { Security } from './security.js';
import { LoadingIndicator } from './loading.js';

/**
 * ë·° ë¼ìš°í„°
 */
export class ViewRouter {
  constructor() {
    this.container = '#app';
    this.currentPath = '';
    this.hooks = {
      beforeLoad: [],
      afterLoad: [],
      onError: []
    };
    // ì¸ìŠ¤í„´ìŠ¤ ê´€ë¦¬
    this.instances = new Map();
    this.currentViewInstances = [];
  }
  
  /**
   * ì´ˆê¸°í™”
   */
  init() {
    // History API ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
    window.addEventListener('popstate', (e) => {
      if (e.state?.path) {
        this._loadView(e.state.path, false);
      }
    });
    
    // ì´ˆê¸° ê²½ë¡œ ë¡œë“œ
    const initialPath = window.location.hash.slice(1) || '';
    if (initialPath) {
      this.navigate(initialPath, true);
    }
  }
  
  /**
   * í˜ì´ì§€ ì´ë™
   */
  async navigate(path, replace = false) {
    // ê²½ë¡œ ë³´ì•ˆ ê²€ì¦
    if (!Security.validatePath(path)) {
      console.error('Invalid path:', path);
      this._emitHook('onError', new Error('Invalid path'));
      return;
    }
    
    await this._loadView(path, !replace);
  }
  
  /**
   * ë·° ë¡œë“œ
   * @private
   */
  async _loadView(path, pushState = true) {
    const from = this.currentPath;
    
    try {
      // ì´ì „ ë·°ì˜ ì¸ìŠ¤í„´ìŠ¤ ì •ë¦¬
      this._cleanupCurrentView();
      
      // beforeLoad í›…
      await this._emitHook('beforeLoad', path, from);
      
      // ë¡œë”© í‘œì‹œ
      LoadingIndicator.show();
      
      // HTML íŒŒì¼ ê°€ì ¸ì˜¤ê¸°
      const response = await fetch(path);
      
      if (!response.ok) {
        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
      }
      
      const html = await response.text();
      
      // ìƒˆë‹ˆíƒ€ì´ì§•
      const sanitizedHtml = Security.sanitize(html);
      
      // ì»¨í…Œì´ë„ˆì— ë Œë”ë§
      const container = document.querySelector(this.container);
      if (container) {
        container.innerHTML = sanitizedHtml;
        
        // ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
        this._executeScripts(container);
      }
      
      // History API ì—…ë°ì´íŠ¸
      if (pushState) {
        window.history.pushState({ path }, '', `#${path}`);
      }
      
      this.currentPath = path;
      
      // afterLoad í›…
      await this._emitHook('afterLoad', path);
      
    } catch (error) {
      console.error('Failed to load view:', error);
      await this._emitHook('onError', error);
    } finally {
      LoadingIndicator.hide();
    }
  }
  
  /**
   * ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
   * @private
   */
  _executeScripts(container) {
    const scripts = container.querySelectorAll('script');
    scripts.forEach(oldScript => {
      const newScript = document.createElement('script');
      
      // ì†ì„± ë³µì‚¬
      Array.from(oldScript.attributes).forEach(attr => {
        newScript.setAttribute(attr.name, attr.value);
      });
      
      // ë‚´ìš© ë³µì‚¬
      newScript.textContent = oldScript.textContent;
      
      // ê¸°ì¡´ ìŠ¤í¬ë¦½íŠ¸ êµì²´
      oldScript.parentNode.replaceChild(newScript, oldScript);
    });
  }
  
  /**
   * URL íŒŒë¼ë¯¸í„° ì¡°íšŒ
   */
  params() {
    const hash = window.location.hash.slice(1);
    const [, queryString] = hash.split('?');
    
    if (!queryString) return {};
    
    const params = {};
    const searchParams = new URLSearchParams(queryString);
    
    for (const [key, value] of searchParams) {
      // ìë™ ì´ìŠ¤ì¼€ì´í”„
      params[key] = Security.escape(value);
    }
    
    return params;
  }
  
  /**
   * ë’¤ë¡œ ê°€ê¸°
   */
  back() {
    window.history.back();
  }
  
  /**
   * ì•ìœ¼ë¡œ ê°€ê¸°
   */
  forward() {
    window.history.forward();
  }
  
  /**
   * í˜„ì¬ ê²½ë¡œ
   */
  current() {
    return this.currentPath;
  }
  
  /**
   * ì»¨í…Œì´ë„ˆ ì„¤ì •
   */
  setContainer(selector) {
    this.container = selector;
  }
  
  /**
   * ì¸ìŠ¤í„´ìŠ¤ ë“±ë¡ (ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€)
   */
  registerInstance(instance) {
    if (instance && typeof instance.destroy === 'function') {
      this.currentViewInstances.push(instance);
      return instance;
    }
    console.warn('Instance must have destroy() method');
    return instance;
  }
  
  /**
   * í˜„ì¬ ë·°ì˜ ëª¨ë“  ì¸ìŠ¤í„´ìŠ¤ ì •ë¦¬
   * @private
   */
  _cleanupCurrentView() {
    // í˜„ì¬ ë·°ì˜ ëª¨ë“  ì¸ìŠ¤í„´ìŠ¤ ì •ë¦¬
    this.currentViewInstances.forEach(instance => {
      try {
        if (instance && typeof instance.destroy === 'function') {
          instance.destroy();
        }
      } catch (error) {
        console.error('Error destroying instance:', error);
      }
    });
    
    // ì¸ìŠ¤í„´ìŠ¤ ë°°ì—´ ì´ˆê¸°í™”
    this.currentViewInstances = [];
  }
  
  /**
   * beforeLoad í›… ë“±ë¡
   */
  beforeLoad(handler) {
    this.hooks.beforeLoad.push(handler);
    return () => this._removeHook('beforeLoad', handler);
  }
  
  /**
   * afterLoad í›… ë“±ë¡
   */
  afterLoad(handler) {
    this.hooks.afterLoad.push(handler);
    return () => this._removeHook('afterLoad', handler);
  }
  
  /**
   * onError í›… ë“±ë¡
   */
  onError(handler) {
    this.hooks.onError.push(handler);
    return () => this._removeHook('onError', handler);
  }
  
  /**
   * í›… ì‹¤í–‰
   * @private
   */
  async _emitHook(name, ...args) {
    const handlers = this.hooks[name] || [];
    for (const handler of handlers) {
      try {
        await handler(...args);
      } catch (error) {
        console.error(`Error in ${name} hook:`, error);
      }
    }
  }
  
  /**
   * í›… ì œê±°
   * @private
   */
  _removeHook(name, handler) {
    const handlers = this.hooks[name];
    const index = handlers.indexOf(handler);
    if (index !== -1) {
      handlers.splice(index, 1);
    }
  }
}
```

### ì£¼ìš” ê¸°ëŠ¥ (Router)

1. **íŒŒì¼ ê²½ë¡œ ê¸°ë°˜ ë¼ìš°íŒ…**
   - ë¼ìš°íŠ¸ ì„¤ì • ë¶ˆí•„ìš”
   - íŒŒì¼ ê²½ë¡œë¥¼ ì§ì ‘ ì‚¬ìš©
   - ìë™ ë³´ì•ˆ ê²€ì¦

2. **ì¸ìŠ¤í„´ìŠ¤ ê´€ë¦¬ (ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€)**
   - ë·° ì „í™˜ ì‹œ ìë™ ì¸ìŠ¤í„´ìŠ¤ ì •ë¦¬
   - destroy() ë©”ì„œë“œ ìë™ í˜¸ì¶œ
   - ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€

3. **ë¼ì´í”„ì‚¬ì´í´ í›…**
   - beforeLoad
   - afterLoad
   - onError

4. **History API**
   - pushStateë¡œ URL ê´€ë¦¬
   - ë’¤ë¡œ/ì•ìœ¼ë¡œ ê°€ê¸° ì§€ì›

5. **URL íŒŒë¼ë¯¸í„°**
   - ì¿¼ë¦¬ ë¬¸ìì—´ íŒŒì‹±
   - ìë™ ì´ìŠ¤ì¼€ì´í”„

---

## 6ï¸âƒ£ Loading Indicator (loading.js)

### Loading ëª¨ë“ˆ ëª©ì 

í˜ì´ì§€ ë° ëª¨ë“ˆ ë¡œë”© ì‹œ ë¡œë”© ì¸ë””ì¼€ì´í„°ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.

### Loading ëª¨ë“ˆ ì„¤ê³„

```javascript
/**
 * ë¡œë”© ì¸ë””ì¼€ì´í„°
 * @module core/loading
 */

/**
 * ë¡œë”© ì¸ë””ì¼€ì´í„° í´ë˜ìŠ¤
 */
export class LoadingIndicator {
  constructor() {
    this.element = null;
    this.config = {
      style: 'spinner', // 'spinner', 'bar', 'dots'
      color: '#007bff',
      position: 'center', // 'center', 'top'
      delay: 200 // ms
    };
    this.showTimer = null;
    this.hideTimer = null;
    this.isShowing = false;
  }
  
  /**
   * ë¡œë”© í‘œì‹œ
   */
  show(message = '') {
    // ì´ë¯¸ í‘œì‹œ ì¤‘ì´ë©´ ë¬´ì‹œ
    if (this.isShowing) return;
    
    // ê¸°ì¡´ íƒ€ì´ë¨¸ ì·¨ì†Œ
    if (this.hideTimer) {
      clearTimeout(this.hideTimer);
      this.hideTimer = null;
    }
    
    // delay í›„ì— í‘œì‹œ (ë¹ ë¥¸ ë¡œë”©ì€ í‘œì‹œ ì•ˆí•¨)
    this.showTimer = setTimeout(() => {
      this._createElement(message);
      this._show();
      this.isShowing = true;
    }, this.config.delay);
  }
  
  /**
   * ë¡œë”© ìˆ¨ê¹€
   */
  hide() {
    // íƒ€ì´ë¨¸ ì·¨ì†Œ
    if (this.showTimer) {
      clearTimeout(this.showTimer);
      this.showTimer = null;
    }
    
    if (!this.isShowing) return;
    
    // ë¶€ë“œëŸ¬ìš´ í˜ì´ë“œì•„ì›ƒ
    this.hideTimer = setTimeout(() => {
      this._hide();
      this.isShowing = false;
    }, 100);
  }
  
  /**
   * ì§„í–‰ë¥  ì„¤ì • (í”„ë¡œê·¸ë ˆìŠ¤ ë°”)
   */
  progress(percent) {
    if (!this.element) return;
    
    const bar = this.element.querySelector('.imcat-loading-bar-fill');
    if (bar) {
      bar.style.width = `${Math.max(0, Math.min(100, percent))}%`;
    }
  }
  
  /**
   * ì„¤ì • ë³€ê²½
   */
  config(options) {
    Object.assign(this.config, options);
  }
  
  /**
   * ì—˜ë¦¬ë¨¼íŠ¸ ìƒì„±
   * @private
   */
  _createElement(message) {
    if (this.element) return;
    
    this.element = document.createElement('div');
    this.element.className = `imcat-loading imcat-loading-${this.config.position}`;
    
    let innerHTML = '';
    
    if (this.config.style === 'spinner') {
      innerHTML = `
        <div class="imcat-loading-spinner">
          <div class="imcat-spinner"></div>
          ${message ? `<div class="imcat-loading-message">${message}</div>` : ''}
        </div>
      `;
    } else if (this.config.style === 'bar') {
      innerHTML = `
        <div class="imcat-loading-bar">
          <div class="imcat-loading-bar-fill"></div>
        </div>
      `;
    } else if (this.config.style === 'dots') {
      innerHTML = `
        <div class="imcat-loading-dots">
          <span></span><span></span><span></span>
        </div>
      `;
    }
    
    this.element.innerHTML = innerHTML;
    
    // CSS ë³€ìˆ˜ ì ìš©
    this.element.style.setProperty('--imcat-loading-color', this.config.color);
  }
  
  /**
   * í‘œì‹œ
   * @private
   */
  _show() {
    if (!this.element) return;
    
    document.body.appendChild(this.element);
    
    // ì• ë‹ˆë©”ì´ì…˜ì„ ìœ„í•œ reflow
    this.element.offsetHeight;
    
    this.element.classList.add('imcat-loading-show');
  }
  
  /**
   * ìˆ¨ê¹€
   * @private
   */
  _hide() {
    if (!this.element) return;
    
    this.element.classList.remove('imcat-loading-show');
    
    setTimeout(() => {
      this.element?.remove();
      this.element = null;
    }, 300);
  }
}

// ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤
export default new LoadingIndicator();
```

### ì£¼ìš” ê¸°ëŠ¥ (Loading)

1. **ë‹¤ì–‘í•œ ìŠ¤íƒ€ì¼**
   - ìŠ¤í”¼ë„ˆ
   - í”„ë¡œê·¸ë ˆìŠ¤ ë°”
   - ë„íŠ¸ ì• ë‹ˆë©”ì´ì…˜

2. **ì§€ì—° í‘œì‹œ**
   - ë¹ ë¥¸ ë¡œë”©ì€ í‘œì‹œ ì•ˆí•¨
   - ì‚¬ìš©ì ê²½í—˜ ê°œì„ 

3. **ì§„í–‰ë¥  í‘œì‹œ**
   - í”„ë¡œê·¸ë ˆìŠ¤ ë°” ì—…ë°ì´íŠ¸

---

## 7ï¸âƒ£ Security Module (security.js)

### Security ëª¨ë“ˆ ëª©ì 

XSS ê³µê²© ë°©ì–´ ë° ë³´ì•ˆ ê²€ì¦ì„ ì œê³µí•©ë‹ˆë‹¤.

### Security ëª¨ë“ˆ ì„¤ê³„

```javascript
/**
 * XSS ë³´ì•ˆ í•„í„°
 * @module core/security
 */

/**
 * ë³´ì•ˆ ìœ í‹¸ë¦¬í‹°
 */
export class Security {
  /**
   * HTML ì´ìŠ¤ì¼€ì´í”„
   */
  static escape(str) {
    if (typeof str !== 'string') return str;
    
    const map = {
      '&': '&amp;',
      '<': '&lt;',
      '>': '&gt;',
      '"': '&quot;',
      "'": '&#x27;',
      '/': '&#x2F;'
    };
    
    return str.replace(/[&<>"'/]/g, char => map[char]);
  }
  
  /**
   * HTML ìƒˆë‹ˆíƒ€ì´ì§•
   */
  static sanitize(html) {
    if (typeof html !== 'string') return '';
    
    // DOMParserë¡œ íŒŒì‹±
    const parser = new DOMParser();
    const doc = parser.parseFromString(html, 'text/html');
    
    // ìœ„í—˜í•œ ìš”ì†Œ ì œê±°
    this._removeDangerousElements(doc.body);
    
    // ìœ„í—˜í•œ ì†ì„± ì œê±°
    this._removeDangerousAttributes(doc.body);
    
    return doc.body.innerHTML;
  }
  
  /**
   * ìœ„í—˜í•œ ìš”ì†Œ ì œê±°
   * @private
   */
  static _removeDangerousElements(element) {
    const dangerous = ['script', 'iframe', 'object', 'embed', 'link', 'style'];
    
    dangerous.forEach(tag => {
      const elements = element.querySelectorAll(tag);
      elements.forEach(el => el.remove());
    });
  }
  
  /**
   * ìœ„í—˜í•œ ì†ì„± ì œê±°
   * @private
   */
  static _removeDangerousAttributes(element) {
    const all = element.querySelectorAll('*');
    
    all.forEach(el => {
      // on* ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì œê±°
      Array.from(el.attributes).forEach(attr => {
        if (attr.name.startsWith('on')) {
          el.removeAttribute(attr.name);
        }
        
        // javascript: URL ì œê±°
        if (attr.value && attr.value.trim().toLowerCase().startsWith('javascript:')) {
          el.removeAttribute(attr.name);
        }
        
        // data: URL (ì¼ë¶€)
        if (attr.name === 'src' || attr.name === 'href') {
          if (attr.value && attr.value.trim().toLowerCase().startsWith('data:')) {
            // ì´ë¯¸ì§€ data URLë§Œ í—ˆìš©
            if (!attr.value.match(/^data:image\/(png|jpg|jpeg|gif|svg\+xml);base64,/i)) {
              el.removeAttribute(attr.name);
            }
          }
        }
      });
    });
  }
  
  /**
   * CSS ê°’ ìƒˆë‹ˆíƒ€ì´ì§•
   */
  static sanitizeCSS(value) {
    if (typeof value !== 'string') return value;
    
    // javascript:, data: URL ì œê±°
    if (value.match(/javascript:|data:/i)) {
      return '';
    }
    
    // expression() ì œê±° (IE)
    if (value.match(/expression\s*\(/i)) {
      return '';
    }
    
    return value;
  }
  
  /**
   * URL ì•ˆì „ì„± ê²€ì¦
   */
  static isSafeUrl(url) {
    if (typeof url !== 'string') return false;
    
    const trimmed = url.trim().toLowerCase();
    
    // ìœ„í—˜í•œ í”„ë¡œí† ì½œ
    const dangerous = ['javascript:', 'data:', 'vbscript:', 'file:'];
    
    return !dangerous.some(proto => trimmed.startsWith(proto));
  }
  
  /**
   * íŒŒì¼ ê²½ë¡œ ê²€ì¦
   */
  static validatePath(path) {
    if (typeof path !== 'string') return false;
    
    // ê²½ë¡œ ìˆœíšŒ ë°©ì§€
    if (path.includes('../') || path.includes('..\\')) {
      return false;
    }
    
    // ì ˆëŒ€ ê²½ë¡œ ê¸ˆì§€ (views/ë¡œ ì‹œì‘í•´ì•¼ í•¨)
    if (path.startsWith('/') || path.match(/^[a-z]:/i)) {
      return false;
    }
    
    // null byte ë°©ì§€
    if (path.includes('\0') || path.includes('%00')) {
      return false;
    }
    
    // URL ì¸ì½”ë”© ìš°íšŒ ë°©ì§€
    const decoded = decodeURIComponent(path);
    if (decoded.includes('../') || decoded.includes('..\\')) {
      return false;
    }
    
    // í—ˆìš©ëœ í™•ì¥ìë§Œ
    const ext = path.split('.').pop().toLowerCase();
    if (!['html', 'php'].includes(ext)) {
      return false;
    }
    
    // í—ˆìš©ëœ ë¬¸ìë§Œ
    if (!path.match(/^[a-z0-9\/\-_\.?&=]+$/i)) {
      return false;
    }
    
    return true;
  }
  
  /**
   * íŒŒì¼ëª… ê²€ì¦
   */
  static isSafeFilename(filename) {
    if (typeof filename !== 'string') return false;
    
    // ê²½ë¡œ ìˆœíšŒ ë°©ì§€
    if (filename.includes('/') || filename.includes('\\')) {
      return false;
    }
    
    // íŠ¹ìˆ˜ ë¬¸ì ê²€ì¦
    return /^[a-z0-9\-_\.]+$/i.test(filename);
  }
  
  /**
   * URL íŒŒë¼ë¯¸í„° ìƒˆë‹ˆíƒ€ì´ì§•
   */
  static sanitizeParam(value) {
    if (typeof value !== 'string') return value;
    
    // SQL ì¸ì ì…˜ íŒ¨í„´ ì œê±°
    let sanitized = value.replace(/['";\\]/g, '');
    
    // HTML ì´ìŠ¤ì¼€ì´í”„
    sanitized = this.escape(sanitized);
    
    return sanitized;
  }
}
```

### ì£¼ìš” ê¸°ëŠ¥ (Security)

1. **HTML ë³´ì•ˆ**
   - escape() - í…ìŠ¤íŠ¸ ì´ìŠ¤ì¼€ì´í”„
   - sanitize() - HTML ìƒˆë‹ˆíƒ€ì´ì§•
   - ìœ„í—˜í•œ íƒœê·¸/ì†ì„± ìë™ ì œê±°

2. **ê²½ë¡œ ê²€ì¦**
   - validatePath() - ê²½ë¡œ ìˆœíšŒ ë°©ì§€
   - isSafeFilename() - íŒŒì¼ëª… ê²€ì¦
   - URL ì¸ì½”ë”© ìš°íšŒ ë°©ì§€

3. **ì¸ì ì…˜ ë°©ì–´**
   - CSS ì¸ì ì…˜ ë°©ì§€
   - URL ê²€ì¦
   - íŒŒë¼ë¯¸í„° ìƒˆë‹ˆíƒ€ì´ì§•

---

## 8ï¸âƒ£ Utils Module (utils.js)

### Utils ëª¨ë“ˆ ëª©ì 

ê¸°ë³¸ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

### Utils ëª¨ë“ˆ ì„¤ê³„

```javascript
/**
 * ê¸°ë³¸ ìœ í‹¸ë¦¬í‹°
 * @module core/utils
 */

export class Utils {
  /**
   * íƒ€ì… ì²´í¬
   */
  static isString(value) {
    return typeof value === 'string';
  }
  
  static isNumber(value) {
    return typeof value === 'number' && !isNaN(value);
  }
  
  static isBoolean(value) {
    return typeof value === 'boolean';
  }
  
  static isObject(value) {
    return value !== null && typeof value === 'object' && !Array.isArray(value);
  }
  
  static isArray(value) {
    return Array.isArray(value);
  }
  
  static isFunction(value) {
    return typeof value === 'function';
  }
  
  static isNull(value) {
    return value === null;
  }
  
  static isUndefined(value) {
    return value === undefined;
  }
  
  static isNullOrUndefined(value) {
    return value === null || value === undefined;
  }
  
  /**
   * ê°ì²´ ì¡°ì‘
   */
  static extend(target, ...sources) {
    sources.forEach(source => {
      if (this.isObject(source)) {
        Object.keys(source).forEach(key => {
          if (this.isObject(source[key]) && this.isObject(target[key])) {
            target[key] = this.extend({}, target[key], source[key]);
          } else {
            target[key] = source[key];
          }
        });
      }
    });
    return target;
  }
  
  static clone(obj) {
    if (!this.isObject(obj) && !this.isArray(obj)) {
      return obj;
    }
    
    return JSON.parse(JSON.stringify(obj));
  }
  
  /**
   * ë¬¸ìì—´ ì¡°ì‘
   */
  static camelCase(str) {
    return str.replace(/[-_](\w)/g, (_, c) => c.toUpperCase());
  }
  
  static kebabCase(str) {
    return str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();
  }
  
  static capitalize(str) {
    return str.charAt(0).toUpperCase() + str.slice(1);
  }
  
  /**
   * ë°°ì—´ ì¡°ì‘
   */
  static unique(array) {
    return [...new Set(array)];
  }
  
  static flatten(array) {
    return array.reduce((acc, val) => 
      Array.isArray(val) ? acc.concat(this.flatten(val)) : acc.concat(val), []);
  }
  
  /**
   * í•¨ìˆ˜ ì¡°ì‘
   */
  static debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
      const later = () => {
        clearTimeout(timeout);
        func(...args);
      };
      clearTimeout(timeout);
      timeout = setTimeout(later, wait);
    };
  }
  
  static throttle(func, limit) {
    let inThrottle;
    return function(...args) {
      if (!inThrottle) {
        func.apply(this, args);
        inThrottle = true;
        setTimeout(() => inThrottle = false, limit);
      }
    };
  }
  
  /**
   * ëœë¤
   */
  static randomId(prefix = 'id') {
    return `${prefix}-${Math.random().toString(36).substr(2, 9)}`;
  }
  
  static randomInt(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
  }
}

// ì „ì—­ ìœ í‹¸ë¦¬í‹°ë¡œ ë‚´ë³´ë‚´ê¸°
export default Utils;
```

### ì£¼ìš” ê¸°ëŠ¥ (Utils)

1. **íƒ€ì… ì²´í¬**
   - ëª¨ë“  ê¸°ë³¸ íƒ€ì… ê²€ì¦
   - null/undefined ì²´í¬

2. **ê°ì²´/ë°°ì—´ ì¡°ì‘**
   - extend - ê°ì²´ ë³‘í•©
   - clone - ê¹Šì€ ë³µì‚¬
   - unique - ì¤‘ë³µ ì œê±°
   - flatten - ë°°ì—´ í‰íƒ„í™”

3. **í•¨ìˆ˜ ìœ í‹¸ë¦¬í‹°**
   - debounce - ë””ë°”ìš´ìŠ¤
   - throttle - ìŠ¤ë¡œí‹€

---

## ğŸ“ ì½”ì–´ í†µí•© íë¦„

```text
1. ì‚¬ìš©ìê°€ IMCAT() í˜¸ì¶œ
   â†“
2. Core Indexê°€ ëª¨ë“  ëª¨ë“ˆ ì´ˆê¸°í™”
   â†“
3. DOM Ready ì´ë²¤íŠ¸ ê°ì§€
   â†“
4. ViewRouter ì´ˆê¸°í™”
   â†“
5. catui-href ë§í¬ ìë™ ë°”ì¸ë”©
   â†“
6. ì‚¬ìš©ì ìƒí˜¸ì‘ìš© ëŒ€ê¸°

[ì‚¬ìš©ìê°€ ë§í¬ í´ë¦­]
   â†“
7. ViewRouterê°€ ê²½ë¡œ ê²€ì¦ (Security)
   â†“
8. LoadingIndicator í‘œì‹œ
   â†“
9. HTML íŒŒì¼ fetch
   â†“
10. Securityê°€ HTML ìƒˆë‹ˆíƒ€ì´ì§•
   â†“
11. ì»¨í…Œì´ë„ˆì— ë Œë”ë§
   â†“
12. ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
   â†“
13. LoadingIndicator ìˆ¨ê¹€
   â†“
14. afterLoad í›… ì‹¤í–‰

[ì‚¬ìš©ìê°€ ëª¨ë“ˆ ì‚¬ìš©]
   â†“
15. ModuleLoaderê°€ ëª¨ë“ˆ ë¡œë“œ
   â†“
16. LoadingIndicator í‘œì‹œ
   â†“
17. JS/CSS ë™ì  import
   â†“
18. ëª¨ë“ˆ ìºì‹±
   â†“
19. LoadingIndicator ìˆ¨ê¹€
   â†“
20. ëª¨ë“ˆ ë°˜í™˜
```

---

## ğŸ¯ êµ¬í˜„ ìš°ì„ ìˆœìœ„

### Phase 1: ê¸°ë³¸ ê¸°ëŠ¥

1. Core Index (index.js) âœ“
2. DOM Module (dom.js) âœ“
3. Security Module (security.js) âœ“
4. Utils Module (utils.js) âœ“

### Phase 2: ê³ ê¸‰ ê¸°ëŠ¥

1. Event Module (event.js) âœ“
2. View Router (router.js) âœ“
3. Loading Indicator (loading.js) âœ“
4. Module Loader (loader.js) âœ“

### Phase 3: í†µí•© ë° í…ŒìŠ¤íŠ¸

- ì½”ì–´ í†µí•©
- ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
- í†µí•© í…ŒìŠ¤íŠ¸
- ì„±ëŠ¥ ìµœì í™”

---

## ğŸ“Š ì„±ëŠ¥ ëª©í‘œ

| í•­ëª© | ëª©í‘œ |
|------|------|
| **ì½”ì–´ í¬ê¸°** | < 15KB (gzipped) |
| **ì´ˆê¸° ë¡œë”©** | < 50ms |
| **DOM ì¡°ì‘** | < 1ms (ì¼ë°˜ì ì¸ ê²½ìš°) |
| **ë·° ì „í™˜** | < 100ms |
| **ëª¨ë“ˆ ë¡œë“œ** | < 200ms |

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì „ëµ

### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸

- ê° ëª¨ë“ˆë³„ ë…ë¦½ í…ŒìŠ¤íŠ¸
- ëª¨ë“  public API í…ŒìŠ¤íŠ¸
- ì—£ì§€ ì¼€ì´ìŠ¤ ì»¤ë²„

### í†µí•© í…ŒìŠ¤íŠ¸

- ëª¨ë“ˆ ê°„ ìƒí˜¸ì‘ìš© í…ŒìŠ¤íŠ¸
- ì‹¤ì œ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸

### ë³´ì•ˆ í…ŒìŠ¤íŠ¸

- XSS ê³µê²© ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸
- ê²½ë¡œ ìˆœíšŒ ê³µê²© í…ŒìŠ¤íŠ¸
- ì¸ì ì…˜ ê³µê²© í…ŒìŠ¤íŠ¸

---

## ğŸ“ ë‹¤ìŒ ë‹¨ê³„

ì½”ì–´ ì•„í‚¤í…ì²˜ ì„¤ê³„ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ìŒ ë¬¸ì„œëŠ”:

1. **API ë ˆí¼ëŸ°ìŠ¤ ë¬¸ì„œ** - ëª¨ë“  API ìƒì„¸ ì„¤ëª…
2. **ê°œë°œ ê°€ì´ë“œ** - ì‹¤ì œ êµ¬í˜„ ë°©ë²•
3. **í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ** - í…ŒìŠ¤íŠ¸ ì‘ì„± ë°©ë²•

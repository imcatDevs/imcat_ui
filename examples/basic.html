<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IMCAT UI - ê¸°ë³¸ ì˜ˆì œ</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      padding: 20px;
      background: #f5f5f5;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      border-radius: 8px;
      padding: 30px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    h1 {
      color: #333;
      margin-bottom: 10px;
    }

    .version {
      color: #666;
      font-size: 14px;
      margin-bottom: 30px;
    }

    .section {
      margin-bottom: 40px;
      padding-bottom: 30px;
      border-bottom: 1px solid #eee;
    }

    .section:last-child {
      border-bottom: none;
    }

    h2 {
      color: #444;
      margin-bottom: 15px;
      font-size: 20px;
    }

    button {
      background: #007bff;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      margin-right: 10px;
      margin-bottom: 10px;
    }

    button:hover {
      background: #0056b3;
    }

    button.secondary {
      background: #6c757d;
    }

    button.secondary:hover {
      background: #545b62;
    }

    .result {
      margin-top: 15px;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 4px;
      font-family: 'Courier New', monospace;
      font-size: 13px;
      color: #333;
    }

    .success {
      background: #d4edda;
      color: #155724;
    }

    .error {
      background: #f8d7da;
      color: #721c24;
    }

    input[type="text"] {
      padding: 8px 12px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
      width: 300px;
      margin-right: 10px;
    }

    .test-box {
      padding: 20px;
      border: 2px dashed #ddd;
      border-radius: 4px;
      margin: 15px 0;
    }

    .hidden {
      display: none;
    }

    .highlight {
      background-color: yellow;
      padding: 2px 4px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ¨ IMCAT UI Framework</h1>
    <div class="version">Core Version: <span id="version"></span></div>

    <!-- 1. DOM ì¡°ì‘ í…ŒìŠ¤íŠ¸ -->
    <div class="section">
      <h2>1ï¸âƒ£ DOM ì¡°ì‘</h2>
      <div class="test-box" id="dom-test">
        <p id="test-text">ì´ í…ìŠ¤íŠ¸ë¥¼ ë³€ê²½í•´ë³´ì„¸ìš”</p>
      </div>
      <button onclick="testDOM()">í…ìŠ¤íŠ¸ ë³€ê²½</button>
      <button onclick="testDOMClass()" class="secondary">í´ë˜ìŠ¤ í† ê¸€</button>
      <button onclick="testDOMCreate()" class="secondary">ìš”ì†Œ ì¶”ê°€</button>
      <div class="result" id="dom-result"></div>
    </div>

    <!-- 2. ì´ë²¤íŠ¸ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ -->
    <div class="section">
      <h2>2ï¸âƒ£ ì´ë²¤íŠ¸ ì‹œìŠ¤í…œ</h2>
      <button id="event-btn">í´ë¦­í•˜ì„¸ìš” (íšŸìˆ˜: <span id="click-count">0</span>)</button>
      <button onclick="testGlobalEvent()" class="secondary">ì „ì—­ ì´ë²¤íŠ¸ ë°œí–‰</button>
      <div class="result" id="event-result"></div>
    </div>

    <!-- 3. ë³´ì•ˆ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ -->
    <div class="section">
      <h2>3ï¸âƒ£ ë³´ì•ˆ (XSS ë°©ì–´)</h2>
      <input type="text" id="user-input" placeholder="ì•…ì„± ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì…ë ¥í•´ë³´ì„¸ìš”" value="<script>alert('XSS')</script>">
      <button onclick="testSecurity()">ë³´ì•ˆ ì²˜ë¦¬</button>
      <div class="test-box">
        <strong>ê²°ê³¼:</strong>
        <div id="security-result"></div>
      </div>
      <div class="result" id="security-log"></div>
    </div>

    <!-- 4. API í†µì‹  ì‹œë®¬ë ˆì´ì…˜ -->
    <div class="section">
      <h2>4ï¸âƒ£ API í†µì‹ </h2>
      <button onclick="testAPISuccess()">ì„±ê³µ ì‘ë‹µ ìƒì„±</button>
      <button onclick="testAPIError()" class="secondary">ì—ëŸ¬ ì‘ë‹µ ìƒì„±</button>
      <button onclick="testAPIPagination()" class="secondary">í˜ì´ì§€ë„¤ì´ì…˜</button>
      <div class="result" id="api-result"></div>
    </div>

    <!-- 5. ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ í…ŒìŠ¤íŠ¸ -->
    <div class="section">
      <h2>5ï¸âƒ£ ìœ í‹¸ë¦¬í‹°</h2>
      <button onclick="testUtils()">íƒ€ì… ì²´í¬</button>
      <button onclick="testUtilsExtend()" class="secondary">ê°ì²´ ë³‘í•©</button>
      <button onclick="testUtilsDebounce()" class="secondary">ë””ë°”ìš´ìŠ¤</button>
      <div class="result" id="utils-result"></div>
    </div>

    <!-- 6. ë¡œë”© ì¸ë””ì¼€ì´í„° í…ŒìŠ¤íŠ¸ -->
    <div class="section">
      <h2>6ï¸âƒ£ ë¡œë”© ì¸ë””ì¼€ì´í„°</h2>
      <button onclick="testLoading()">ë¡œë”© í‘œì‹œ (2ì´ˆ)</button>
      <button onclick="testLoadingProgress()" class="secondary">ì§„í–‰ë¥  í‘œì‹œ</button>
      <div class="result" id="loading-result"></div>
    </div>
  </div>

  <!-- IMCAT UI ì½”ì–´ ë¡œë“œ -->
  <script type="module">
    import IMCAT from '../dist/imcat-ui.js';

    // ì „ì—­ìœ¼ë¡œ ì‚¬ìš© ê°€ëŠ¥í•˜ë„ë¡
    window.IMCAT = IMCAT;

    // ë²„ì „ í‘œì‹œ
    document.getElementById('version').textContent = IMCAT.version;

    // ì „ì—­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
    IMCAT.on('app:message', (data) => {
      const result = document.getElementById('event-result');
      result.className = 'result success';
      result.textContent = `ì „ì—­ ì´ë²¤íŠ¸ ìˆ˜ì‹ : ${JSON.stringify(data)}`;
    });

    // DOM ì¤€ë¹„ ì™„ë£Œ
    IMCAT.ready(() => {
      console.log('âœ… IMCAT UI ì¤€ë¹„ ì™„ë£Œ!');
      console.log('ë²„ì „:', IMCAT.version);
    });

    // 1. DOM ì¡°ì‘ í…ŒìŠ¤íŠ¸
    window.testDOM = function() {
      IMCAT('#test-text').text('âœ… í…ìŠ¤íŠ¸ê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤!');
      document.getElementById('dom-result').textContent = 'ì„±ê³µ: í…ìŠ¤íŠ¸ ë³€ê²½ë¨';
    };

    window.testDOMClass = function() {
      IMCAT('#test-text').toggleClass('highlight');
      document.getElementById('dom-result').textContent = 'ì„±ê³µ: í´ë˜ìŠ¤ í† ê¸€ë¨';
    };

    window.testDOMCreate = function() {
      const newEl = IMCAT.create('p', { 
        text: 'ìƒˆë¡œ ìƒì„±ëœ ìš”ì†Œì…ë‹ˆë‹¤!',
        class: 'highlight'
      });
      newEl.appendTo('#dom-test');
      document.getElementById('dom-result').textContent = 'ì„±ê³µ: ìƒˆ ìš”ì†Œ ì¶”ê°€ë¨';
    };

    // 2. ì´ë²¤íŠ¸ í…ŒìŠ¤íŠ¸
    let clickCount = 0;
    IMCAT('#event-btn').on('click', () => {
      clickCount++;
      IMCAT('#click-count').text(clickCount);
      const result = document.getElementById('event-result');
      result.textContent = `í´ë¦­ ì´ë²¤íŠ¸ ë°œìƒ! (ì´ ${clickCount}íšŒ)`;
    });

    window.testGlobalEvent = function() {
      IMCAT.emit('app:message', { 
        type: 'test',
        message: 'ì „ì—­ ì´ë²¤íŠ¸ í…ŒìŠ¤íŠ¸',
        timestamp: Date.now()
      });
    };

    // 3. ë³´ì•ˆ í…ŒìŠ¤íŠ¸
    window.testSecurity = function() {
      const input = document.getElementById('user-input').value;
      const escaped = IMCAT.escape(input);
      const sanitized = IMCAT.sanitize(input);

      IMCAT('#security-result').html(`
        <strong>ì›ë³¸:</strong> ${input}<br>
        <strong>ì´ìŠ¤ì¼€ì´í”„:</strong> ${escaped}<br>
        <strong>ìƒˆë‹ˆíƒ€ì´ì§•:</strong> ${sanitized}
      `);

      const log = document.getElementById('security-log');
      log.className = 'result success';
      log.textContent = 'âœ… XSS ê³µê²©ì´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤!';
    };

    // 4. API í…ŒìŠ¤íŠ¸
    window.testAPISuccess = function() {
      const response = IMCAT.api.success({ 
        users: [
          { id: 1, name: 'John Doe' },
          { id: 2, name: 'Jane Smith' }
        ]
      }, 'ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ ì„±ê³µ');

      const result = document.getElementById('api-result');
      result.className = 'result success';
      result.textContent = JSON.stringify(response, null, 2);
    };

    window.testAPIError = function() {
      const response = IMCAT.api.error('ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤', 404);

      const result = document.getElementById('api-result');
      result.className = 'result error';
      result.textContent = JSON.stringify(response, null, 2);
    };

    window.testAPIPagination = function() {
      const items = Array.from({ length: 10 }, (_, i) => ({ id: i + 1, name: `Item ${i + 1}` }));
      const response = IMCAT.api.paginated(items, {
        page: 1,
        limit: 10,
        total: 100
      });

      const result = document.getElementById('api-result');
      result.className = 'result success';
      result.textContent = JSON.stringify(response, null, 2);
    };

    // 5. ìœ í‹¸ë¦¬í‹° í…ŒìŠ¤íŠ¸
    window.testUtils = function() {
      const tests = {
        'isString("hello")': IMCAT.isString('hello'),
        'isNumber(123)': IMCAT.isNumber(123),
        'isArray([1,2,3])': IMCAT.isArray([1,2,3]),
        'isObject({a:1})': IMCAT.isObject({a:1})
      };

      const result = document.getElementById('utils-result');
      result.textContent = JSON.stringify(tests, null, 2);
    };

    window.testUtilsExtend = function() {
      const obj1 = { a: 1, b: { c: 2 } };
      const obj2 = { b: { d: 3 }, e: 4 };
      const merged = IMCAT.extend({}, obj1, obj2);

      const result = document.getElementById('utils-result');
      result.textContent = `ë³‘í•© ê²°ê³¼:\n${JSON.stringify(merged, null, 2)}`;
    };

    window.testUtilsDebounce = function() {
      let count = 0;
      const debounced = IMCAT.debounce(() => {
        count++;
        const result = document.getElementById('utils-result');
        result.textContent = `ë””ë°”ìš´ìŠ¤ ì‹¤í–‰ë¨: ${count}íšŒ`;
      }, 300);

      // ë¹ ë¥´ê²Œ ì—¬ëŸ¬ ë²ˆ í˜¸ì¶œ
      for (let i = 0; i < 10; i++) {
        debounced();
      }

      const result = document.getElementById('utils-result');
      result.textContent = 'ë””ë°”ìš´ìŠ¤ í…ŒìŠ¤íŠ¸ ì¤‘... (300ms í›„ 1íšŒë§Œ ì‹¤í–‰ë¨)';
    };

    // 6. ë¡œë”© í…ŒìŠ¤íŠ¸
    window.testLoading = function() {
      IMCAT.loading.show('ë°ì´í„° ë¡œë”© ì¤‘...');
      
      setTimeout(() => {
        IMCAT.loading.hide();
        const result = document.getElementById('loading-result');
        result.textContent = 'âœ… ë¡œë”© ì™„ë£Œ!';
      }, 2000);

      const result = document.getElementById('loading-result');
      result.textContent = 'ë¡œë”© ì¤‘... (2ì´ˆ)';
    };

    window.testLoadingProgress = function() {
      IMCAT.loading.setConfig({ style: 'bar' });
      IMCAT.loading.show();
      
      let progress = 0;
      const interval = setInterval(() => {
        progress += 10;
        IMCAT.loading.progress(progress);
        
        if (progress >= 100) {
          clearInterval(interval);
          setTimeout(() => {
            IMCAT.loading.hide();
            IMCAT.loading.setConfig({ style: 'spinner' }); // ê¸°ë³¸ê°’ìœ¼ë¡œ ë³µêµ¬
            const result = document.getElementById('loading-result');
            result.textContent = 'âœ… ì§„í–‰ë¥  100% ì™„ë£Œ!';
          }, 500);
        }
      }, 200);

      const result = document.getElementById('loading-result');
      result.textContent = 'ì§„í–‰ë¥  í‘œì‹œ ì¤‘...';
    };

    console.log('ğŸ“š IMCAT UI ì˜ˆì œê°€ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!');
    console.log('ì‚¬ìš© ê°€ëŠ¥í•œ ì „ì—­ ê°ì²´: IMCAT');
  </script>
</body>
</html>

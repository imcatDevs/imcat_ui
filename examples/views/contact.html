<div class="page-title">ğŸ“§ ì—°ë½ì²˜</div>

<div class="info-box">
  <h2>ë¬¸ì˜í•˜ê¸°</h2>
  <p>í¼ ê²€ì¦ ëª¨ë“ˆì„ ì‚¬ìš©í•œ ì‹¤ì‹œê°„ ìœ íš¨ì„± ê²€ì‚¬</p>
  
  <form id="contact-form" style="margin-top: 20px;">
    <div class="form-group">
      <label>ì´ë¦„ *</label>
      <input type="text" name="name" placeholder="í™ê¸¸ë™">
    </div>
    
    <div class="form-group">
      <label>ì´ë©”ì¼ *</label>
      <input type="email" name="email" placeholder="example@email.com">
    </div>
    
    <div class="form-group">
      <label>ì „í™”ë²ˆí˜¸</label>
      <input type="text" name="phone" placeholder="010-1234-5678">
    </div>
    
    <div class="form-group">
      <label>ë©”ì‹œì§€ *</label>
      <textarea name="message" placeholder="ë¬¸ì˜ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”..." rows="5"></textarea>
    </div>
    
    <button type="submit" class="btn-submit">ì „ì†¡</button>
    <button type="button" class="btn-reset" onclick="resetForm()">ì´ˆê¸°í™”</button>
  </form>
  
  <div id="form-result" style="margin-top: 15px;"></div>
</div>

<div class="info-box">
  <h3>ğŸ“ ìœ„ì¹˜</h3>
  <p><strong>ì£¼ì†Œ:</strong> ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬</p>
  <p><strong>ì´ë©”ì¼:</strong> contact@imcat-ui.com</p>
  <p><strong>ì „í™”:</strong> 010-1234-5678</p>
</div>

<script>
(function() {
  // í¼ ê²€ì¦ ì„¤ì •
  const validator = IMCAT.form.create('#contact-form', {
    name: {
      required: true,
      minLength: 2,
      maxLength: 50
    },
    email: {
      required: true,
      email: true
    },
    phone: {
      pattern: /^01[0-9]-\d{3,4}-\d{4}$/,
      custom: (value) => {
        if (!value) return { valid: true };
        return {
          valid: /^01[0-9]-\d{3,4}-\d{4}$/.test(value),
          message: 'ì˜¬ë°”ë¥¸ ì „í™”ë²ˆí˜¸ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤. (ì˜ˆ: 010-1234-5678)'
        };
      }
    },
    message: {
      required: true,
      minLength: 10,
      maxLength: 500
    }
  }, {
    validateOnBlur: true,
    showErrorMessages: true
  });

  // í¼ ì œì¶œ ì²˜ë¦¬
  document.getElementById('contact-form').addEventListener('submit', async (e) => {
    e.preventDefault();
    
    if (validator.validate()) {
      const formData = new FormData(e.target);
      const data = Object.fromEntries(formData);
      
      // ë³´ì•ˆ ì²˜ë¦¬ (XSS ë°©ì§€)
      const safeName = IMCAT.escape(data.name);
      const safeEmail = IMCAT.escape(data.email);
      const safeMessage = IMCAT.escape(data.message);
      
      // ê²°ê³¼ í‘œì‹œ
      const resultDiv = document.getElementById('form-result');
      resultDiv.innerHTML = `
        <div class="success-box">
          <strong>âœ… ì „ì†¡ ì™„ë£Œ!</strong><br>
          ì´ë¦„: ${safeName}<br>
          ì´ë©”ì¼: ${safeEmail}<br>
          ë©”ì‹œì§€: ${safeMessage}
        </div>
      `;
      
      // ì„±ê³µ ì• ë‹ˆë©”ì´ì…˜
      await IMCAT.animate(resultDiv).bounceIn(600);
      
      // Storageì— ì €ì¥
      IMCAT.storage.set('lastContact', {
        name: data.name,
        email: data.email,
        timestamp: new Date().toISOString()
      }, { expires: 3600 }); // 1ì‹œê°„ í›„ ë§Œë£Œ
      
      console.log('âœ… ë¬¸ì˜ ì „ì†¡ ì™„ë£Œ:', data);
    } else {
      // ì—ëŸ¬ê°€ ìˆëŠ” ì²« ë²ˆì§¸ í•„ë“œì— shake ì• ë‹ˆë©”ì´ì…˜
      const errors = validator.getErrors();
      const firstErrorField = Object.keys(errors)[0];
      const field = document.querySelector(`[name="${firstErrorField}"]`);
      if (field) {
        await IMCAT.animate(field).shake(500);
      }
      console.log('âŒ ê²€ì¦ ì‹¤íŒ¨:', errors);
    }
  });

  // í¼ ì´ˆê¸°í™”
  window.resetForm = function() {
    validator.reset();
    document.getElementById('form-result').innerHTML = '';
  };

  // ì´ì „ ë¬¸ì˜ ë‚´ì—­ í™•ì¸
  const lastContact = IMCAT.storage.get('lastContact');
  if (lastContact) {
    console.log('ğŸ“ ì´ì „ ë¬¸ì˜:', lastContact);
  }

  console.log('ğŸ“§ ì—°ë½ì²˜ í˜ì´ì§€ ë¡œë“œë¨');
})();
</script>

<style>
  .form-group {
    margin-bottom: 20px;
  }
  
  label {
    display: block;
    margin-bottom: 8px;
    font-weight: 500;
    color: #333;
  }
  
  input, textarea {
    width: 100%;
    padding: 12px;
    border: 2px solid #ddd;
    border-radius: 6px;
    font-size: 14px;
    font-family: inherit;
    transition: border-color 0.3s;
  }
  
  input:focus, textarea:focus {
    outline: none;
    border-color: #667eea;
  }
  
  input.is-invalid, textarea.is-invalid {
    border-color: #dc3545;
  }
  
  input.is-valid, textarea.is-valid {
    border-color: #28a745;
  }
  
  .error-message {
    color: #dc3545;
    font-size: 12px;
    margin-top: 5px;
  }
  
  .btn-submit, .btn-reset {
    padding: 12px 24px;
    border: none;
    border-radius: 6px;
    font-size: 16px;
    cursor: pointer;
    margin-right: 10px;
    transition: all 0.3s;
  }
  
  .btn-submit {
    background: #667eea;
    color: white;
  }
  
  .btn-submit:hover {
    background: #764ba2;
  }
  
  .btn-reset {
    background: #6c757d;
    color: white;
  }
  
  .btn-reset:hover {
    background: #5a6268;
  }
  
  .success-box {
    background: #d4edda;
    color: #155724;
    padding: 15px;
    border-radius: 6px;
    border-left: 4px solid #28a745;
  }
</style>

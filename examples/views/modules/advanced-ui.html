<!-- Breadcrumb -->
<div class="page-title-box">
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="#" catui-href="views/home.html">Home</a></li>
      <li class="breadcrumb-item"><a href="#" catui-href="views/modules.html">Modules</a></li>
      <li class="breadcrumb-item active" aria-current="page">Advanced UI</li>
    </ol>
  </nav>
  <h1 class="page-title">Advanced UI</h1>
  <p class="page-description">Split Pane, QR Code, Code Block, Color Picker 등 고급 UI 컴포넌트입니다.</p>
</div>

<!-- Split Pane -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card">
      <div class="card__header">
        <h2 class="card__title">Split Pane</h2>
        <p class="card__description">크기 조절 가능한 분할 패널입니다. 드래그하여 크기를 조절하세요.</p>
      </div>
      <div class="card__body">
        <!-- Horizontal Split -->
        <h4 class="mb-3">수평 분할</h4>
        <div id="split_horizontal" style="height: 300px; border: 1px solid var(--border-color); border-radius: 8px; overflow: hidden;">
          <div style="padding: 16px; background: var(--bg-secondary);">
            <h5>왼쪽 패널</h5>
            <p>파일 탐색기, 네비게이션 메뉴 등을 배치할 수 있습니다.</p>
          </div>
          <div style="padding: 16px;">
            <h5>오른쪽 패널</h5>
            <p>메인 콘텐츠, 에디터, 뷰어 등을 배치할 수 있습니다.</p>
          </div>
        </div>
        
        <!-- Vertical Split -->
        <h4 class="mb-3 mt-4">수직 분할</h4>
        <div id="split_vertical" style="height: 300px; border: 1px solid var(--border-color); border-radius: 8px; overflow: hidden;">
          <div style="padding: 16px;">
            <h5>상단 패널</h5>
            <p>코드 에디터, 입력 영역 등을 배치할 수 있습니다.</p>
          </div>
          <div style="padding: 16px; background: var(--bg-secondary);">
            <h5>하단 패널</h5>
            <p>출력 결과, 콘솔, 터미널 등을 배치할 수 있습니다.</p>
          </div>
        </div>
        
        <div class="mt-3">
          <span class="text-secondary">현재 크기: </span>
          <span id="split_sizes">50% / 50%</span>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- QR Code -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card">
      <div class="card__header">
        <h2 class="card__title">QR Code Generator</h2>
        <p class="card__description">텍스트나 URL을 QR 코드로 변환합니다.</p>
      </div>
      <div class="card__body">
        <div class="row g-4">
          <div class="col-md-6">
            <div class="mb-3">
              <label class="form-label">텍스트 또는 URL</label>
              <input type="text" id="qr_input" class="form-control" value="https://example.com" placeholder="QR 코드로 변환할 내용">
            </div>
            <div class="mb-3">
              <label class="form-label">크기</label>
              <select id="qr_size" class="form-select">
                <option value="128">128 x 128</option>
                <option value="200" selected>200 x 200</option>
                <option value="256">256 x 256</option>
                <option value="320">320 x 320</option>
              </select>
            </div>
            <div class="row g-2 mb-3">
              <div class="col-6">
                <label class="form-label">전경색</label>
                <input type="color" id="qr_dark" class="form-control" value="#000000" style="height: 40px; padding: 4px; cursor: pointer;">
              </div>
              <div class="col-6">
                <label class="form-label">배경색</label>
                <input type="color" id="qr_light" class="form-control" value="#ffffff" style="height: 40px; padding: 4px; cursor: pointer; background: #f3f4f6;">
              </div>
            </div>
            <button class="btn btn--primary" onclick="generateQR()">QR 코드 생성</button>
          </div>
          <div class="col-md-6">
            <div class="qr-code-container text-center">
              <div id="qr_output" style="min-height: 200px; display: flex; align-items: center; justify-content: center; background: var(--bg-secondary); border-radius: 8px; padding: 24px;">
                <span class="text-secondary">QR 코드가 여기에 표시됩니다</span>
              </div>
              <div class="qr-code-container__actions mt-3">
                <button class="btn btn--outline-primary btn--sm" onclick="downloadQR()">
                  <i class="material-icons-outlined">download</i>
                  다운로드
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Code Block -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card">
      <div class="card__header">
        <h2 class="card__title">Code Block</h2>
        <p class="card__description">복사 기능이 포함된 코드 블록입니다.</p>
      </div>
      <div class="card__body">
        <div id="code_block_demo"></div>
      </div>
    </div>
  </div>
</div>

<!-- Copy to Clipboard -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card">
      <div class="card__header">
        <h2 class="card__title">Copy to Clipboard</h2>
        <p class="card__description">클립보드 복사 유틸리티입니다.</p>
      </div>
      <div class="card__body">
        <div class="d-flex gap-3 flex-wrap align-items-end mb-4">
          <div style="flex: 1; min-width: 200px;">
            <label class="form-label">복사할 텍스트</label>
            <input type="text" id="copy_input" class="form-control" value="복사할 텍스트입니다!">
          </div>
          <button class="btn btn--primary" onclick="copyText()">
            <i class="material-icons-outlined">content_copy</i>
            복사하기
          </button>
        </div>
        
        <div id="copy_result" class="alert alert--success" style="display: none;">
          <i class="material-icons-outlined">check_circle</i>
          <span>클립보드에 복사되었습니다!</span>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Simple Color Picker -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card">
      <div class="card__header">
        <h2 class="card__title">Simple Color Picker</h2>
        <p class="card__description">프리셋 색상 선택기입니다.</p>
      </div>
      <div class="card__body">
        <div class="row g-4">
          <div class="col-md-6">
            <div id="color_picker_demo"></div>
          </div>
          <div class="col-md-6">
            <div class="p-4 rounded" id="color_preview" style="background: #3b82f6; height: 150px; display: flex; align-items: center; justify-content: center;">
              <span style="color: white; font-weight: 600; font-size: 24px;" id="color_value">#3b82f6</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Skeleton Loader -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card">
      <div class="card__header">
        <h2 class="card__title">Skeleton Loader</h2>
        <p class="card__description">콘텐츠 로딩 시 표시하는 스켈레톤입니다.</p>
      </div>
      <div class="card__body">
        <div class="row g-4">
          <div class="col-md-4">
            <div class="p-3 rounded" style="background: var(--bg-secondary);">
              <div class="skeleton skeleton--thumbnail mb-3"></div>
              <div class="skeleton skeleton--title"></div>
              <div class="skeleton skeleton--text"></div>
              <div class="skeleton skeleton--text"></div>
              <div class="skeleton skeleton--text" style="width: 60%;"></div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="p-3 rounded" style="background: var(--bg-secondary);">
              <div class="d-flex gap-3 mb-3">
                <div class="skeleton skeleton--avatar"></div>
                <div style="flex: 1;">
                  <div class="skeleton skeleton--text" style="width: 60%;"></div>
                  <div class="skeleton skeleton--text" style="width: 40%;"></div>
                </div>
              </div>
              <div class="skeleton skeleton--text"></div>
              <div class="skeleton skeleton--text"></div>
              <div class="skeleton skeleton--button mt-3"></div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="p-3 rounded" style="background: var(--bg-secondary);">
              <div class="d-flex gap-2 mb-3">
                <div class="skeleton" style="width: 80px; height: 80px; border-radius: 8px;"></div>
                <div style="flex: 1;">
                  <div class="skeleton skeleton--text" style="width: 80%;"></div>
                  <div class="skeleton skeleton--text" style="width: 50%;"></div>
                  <div class="skeleton skeleton--text" style="width: 30%;"></div>
                </div>
              </div>
              <div class="skeleton skeleton--text"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Empty State -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card">
      <div class="card__header">
        <h2 class="card__title">Empty State</h2>
        <p class="card__description">데이터가 없을 때 표시하는 빈 상태입니다.</p>
      </div>
      <div class="card__body">
        <div class="row g-4">
          <div class="col-md-6">
            <div class="empty-state" style="background: var(--bg-secondary); border-radius: 8px;">
              <div class="empty-state__icon">
                <i class="material-icons-outlined">inbox</i>
              </div>
              <div class="empty-state__title">메시지가 없습니다</div>
              <div class="empty-state__description">아직 받은 메시지가 없습니다. 새로운 대화를 시작해보세요.</div>
              <div class="empty-state__action">
                <button class="btn btn--primary">새 메시지 작성</button>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="empty-state" style="background: var(--bg-secondary); border-radius: 8px;">
              <div class="empty-state__icon">
                <i class="material-icons-outlined">search</i>
              </div>
              <div class="empty-state__title">검색 결과 없음</div>
              <div class="empty-state__description">검색어와 일치하는 결과를 찾을 수 없습니다. 다른 키워드로 검색해보세요.</div>
              <div class="empty-state__action">
                <button class="btn btn--outline-primary">필터 초기화</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Code Example -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card">
      <div class="card__header">
        <h2 class="card__title">사용법</h2>
      </div>
      <div class="card__body">
        <pre><code class="language-javascript">// 모듈 로드
const AdvancedUI = await IMCAT.use('advanced-ui');

// Split Pane - 분할 패널
const split = new AdvancedUI.SplitPane('#container', {
  direction: 'horizontal', // 'horizontal' | 'vertical'
  initialSizes: [30, 70],  // 퍼센트
  minSizes: [200, 300],    // 최소 크기 (px)
  gutterSize: 8,
  collapsible: true,
  onDragEnd: (sizes) => console.log('Sizes:', sizes)
});
split.setSizes([40, 60]);
split.collapseFirst();     // 첫 번째 패널 접기

// QR Code - QR 코드 생성
const qr = new AdvancedUI.QRCode('#qr', {
  text: 'https://example.com',
  size: 200,
  colorDark: '#000000',
  colorLight: '#ffffff',
  margin: 4
});
qr.setText('새로운 텍스트');
qr.download('my-qr.png'); // 이미지 다운로드

// Copy to Clipboard - 클립보드 복사
const success = await AdvancedUI.CopyToClipboard.copy('텍스트');
const fromEl = await AdvancedUI.CopyToClipboard.copyFrom('#input');

// Code Block - 코드 블록
const codeBlock = new AdvancedUI.CodeBlock('#code', {
  code: 'console.log("Hello!");',
  language: 'javascript',
  showLineNumbers: true,
  copyButton: true
});
codeBlock.setCode('새로운 코드');

// Simple Color Picker - 색상 선택기
const colorPicker = new AdvancedUI.SimpleColorPicker('#picker', {
  colors: ['#ef4444', '#3b82f6', '#10b981', '#f59e0b'],
  value: '#3b82f6',
  showInput: true,
  onChange: (color) => console.log('Color:', color)
});
colorPicker.setValue('#ef4444');
const color = colorPicker.getValue();

// 메모리 관리
IMCAT.view.registerInstance(split);
IMCAT.view.registerInstance(qr);
IMCAT.view.registerInstance(codeBlock);
IMCAT.view.registerInstance(colorPicker);</code></pre>
      </div>
    </div>
  </div>
</div>

<script type="module">
// 모듈 로드
window.AdvancedUIModule = await IMCAT.use('advanced-ui');
const { SplitPane, QRCode, CopyToClipboard, CodeBlock, SimpleColorPicker } = AdvancedUIModule;

// Split Pane 데모
window.splitH = new SplitPane('#split_horizontal', {
  direction: 'horizontal',
  initialSizes: [30, 70],
  minSizes: [150, 200],
  onDragEnd: (sizes) => {
    document.getElementById('split_sizes').textContent = 
      `${sizes[0].toFixed(0)}% / ${sizes[1].toFixed(0)}%`;
  }
});
IMCAT.view.registerInstance(splitH);

window.splitV = new SplitPane('#split_vertical', {
  direction: 'vertical',
  initialSizes: [50, 50],
  minSizes: [100, 100]
});
IMCAT.view.registerInstance(splitV);

// QR Code 데모
window.qrCode = null;

window.generateQR = function() {
  const text = document.getElementById('qr_input').value;
  const size = parseInt(document.getElementById('qr_size').value);
  const colorDark = document.getElementById('qr_dark').value;
  const colorLight = document.getElementById('qr_light').value;
  
  if (qrCode) qrCode.destroy();
  
  qrCode = new QRCode('#qr_output', {
    text,
    size,
    colorDark,
    colorLight
  });
  IMCAT.view.registerInstance(qrCode);
};

window.downloadQR = function() {
  if (qrCode) {
    qrCode.download('qrcode.png');
  }
};

// 초기 QR 생성
generateQR();

// Code Block 데모
const sampleCode = `// IMCAT UI 사용 예제
const module = await IMCAT.use('feedback');

const toast = new module.Toast({
  message: '작업이 완료되었습니다!',
  type: 'success',
  duration: 3000
});

toast.show();`;

window.codeBlockDemo = new CodeBlock('#code_block_demo', {
  code: sampleCode,
  language: 'JavaScript',
  showLineNumbers: true,
  copyButton: true
});
IMCAT.view.registerInstance(codeBlockDemo);

// Copy to Clipboard 데모
window.copyText = async function() {
  const text = document.getElementById('copy_input').value;
  const success = await CopyToClipboard.copy(text);
  
  if (success) {
    const result = document.getElementById('copy_result');
    result.style.display = 'flex';
    setTimeout(() => {
      result.style.display = 'none';
    }, 2000);
  }
};

// Color Picker 데모
window.colorPicker = new SimpleColorPicker('#color_picker_demo', {
  value: '#3b82f6',
  onChange: (color) => {
    document.getElementById('color_preview').style.background = color;
    document.getElementById('color_value').textContent = color;
  }
});
IMCAT.view.registerInstance(colorPicker);
</script>

<!-- Breadcrumb -->
<div class="page-title-box">
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="#home">Home</a></li>
      <li class="breadcrumb-item"><a href="#modules">Dynamic Modules</a></li>
      <li class="breadcrumb-item active">Forms</li>
    </ol>
  </nav>
  <h1 class="page-title">Form Components</h1>
  <p class="page-description">FileUpload, Rating, SignaturePad, FormWizard ë“± í¼ ê´€ë ¨ ê³ ê¸‰ ì»´í¬ë„ŒíŠ¸</p>
</div>

<div class="row">
  <!-- FileUpload -->
  <div class="col-12">
    <div class="card mb-4">
      <div class="card__header">
        <h2 class="card__title">FileUpload - íŒŒì¼ ì—…ë¡œë“œ</h2>
        <p class="card__description">ë“œë˜ê·¸ ì•¤ ë“œë¡­ì„ ì§€ì›í•˜ëŠ” íŒŒì¼ ì—…ë¡œë“œ</p>
      </div>
      <div class="card__body">
        <div class="row" style="gap: 2rem;">
          <!-- ê¸°ë³¸ ì—…ë¡œë“œ -->
          <div class="col-md-6">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">ğŸ“ ê¸°ë³¸ íŒŒì¼ ì—…ë¡œë“œ</label>
            <input type="file" id="upload_basic">
          </div>
          
          <!-- ì´ë¯¸ì§€ ì „ìš© -->
          <div class="col-md-6">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">ğŸ–¼ï¸ ì´ë¯¸ì§€ ì—…ë¡œë“œ (ë‹¤ì¤‘ ì„ íƒ)</label>
            <input type="file" id="upload_images">
          </div>
          
          <!-- ë¬¸ì„œ ì „ìš© -->
          <div class="col-md-6">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">ğŸ“„ ë¬¸ì„œ ì—…ë¡œë“œ (PDF, Word)</label>
            <input type="file" id="upload_docs">
          </div>
          
          <!-- ì—…ë¡œë“œ ì‹œë®¬ë ˆì´ì…˜ -->
          <div class="col-md-6">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">ğŸš€ ì—…ë¡œë“œ ì‹œë®¬ë ˆì´ì…˜ (Progress)</label>
            <input type="file" id="upload_progress">
            <button id="btn_upload" onclick="startUpload()" style="margin-top: 1rem; padding: 0.5rem 1rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 500;" disabled>
              <i class="material-icons-outlined" style="font-size: 18px; vertical-align: middle;">cloud_upload</i>
              ì—…ë¡œë“œ ì‹œì‘
            </button>
            <div id="upload_status" style="margin-top: 0.5rem; font-size: 0.875rem; color: var(--text-secondary);"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Rating -->
  <div class="col-12">
    <div class="card mb-4">
      <div class="card__header">
        <h2 class="card__title">Rating - ë³„ì  ì…ë ¥</h2>
        <p class="card__description">ë³„ì  ì„ íƒ ì»´í¬ë„ŒíŠ¸</p>
      </div>
      <div class="card__body">
        <div class="row" style="gap: 2rem;">
          <!-- ê¸°ë³¸ -->
          <div class="col-md-4">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">â­ ê¸°ë³¸ ë³„ì </label>
            <div id="rating_basic"></div>
            <div id="rating_basic_result" style="margin-top: 0.5rem; font-size: 0.875rem; color: var(--text-secondary);"></div>
          </div>
          
          <!-- ì‘ì€ ì‚¬ì´ì¦ˆ -->
          <div class="col-md-4">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">ğŸ”¸ Small ì‚¬ì´ì¦ˆ</label>
            <div id="rating_sm"></div>
          </div>
          
          <!-- í° ì‚¬ì´ì¦ˆ -->
          <div class="col-md-4">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">ğŸ”¶ Large ì‚¬ì´ì¦ˆ</label>
            <div id="rating_lg"></div>
          </div>
          
          <!-- ì»¤ìŠ¤í…€ ìƒ‰ìƒ -->
          <div class="col-md-4">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">ğŸ’œ ì»¤ìŠ¤í…€ ìƒ‰ìƒ</label>
            <div id="rating_color"></div>
          </div>
          
          <!-- 10ì  ë§Œì  -->
          <div class="col-md-4">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">ğŸŒŸ 10ì  ë§Œì </label>
            <div id="rating_10"></div>
          </div>
          
          <!-- ì½ê¸° ì „ìš© -->
          <div class="col-md-4">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">ğŸ”’ ì½ê¸° ì „ìš©</label>
            <div id="rating_readonly"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- SignaturePad -->
  <div class="col-12">
    <div class="card mb-4">
      <div class="card__header">
        <h2 class="card__title">SignaturePad - ì„œëª… íŒ¨ë“œ</h2>
        <p class="card__description">í„°ì¹˜/ë§ˆìš°ìŠ¤ë¡œ ì„œëª…ì„ ê·¸ë¦¬ëŠ” ìº”ë²„ìŠ¤</p>
      </div>
      <div class="card__body">
        <div class="row" style="gap: 2rem;">
          <!-- ê¸°ë³¸ ì„œëª… íŒ¨ë“œ -->
          <div class="col-md-6">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">âœï¸ ì„œëª…í•´ì£¼ì„¸ìš”</label>
            <div id="signature_basic"></div>
          </div>
          
          <!-- ì»¤ìŠ¤í…€ ì„œëª… íŒ¨ë“œ -->
          <div class="col-md-6">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">ğŸ–Šï¸ íŒŒë€ íœ (êµµì€ ì„ )</label>
            <div id="signature_custom"></div>
          </div>
          
          <!-- ì„œëª… ë¯¸ë¦¬ë³´ê¸° -->
          <div class="col-12">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">ğŸ“‹ ì €ì¥ëœ ì„œëª…</label>
            <div id="signature_preview" style="padding: 1rem; background: var(--bg-secondary); border-radius: 8px; min-height: 100px;">
              <p style="color: var(--text-secondary); margin: 0;">ì„œëª…ì„ ì €ì¥í•˜ë©´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- FormWizard -->
  <div class="col-12">
    <div class="card mb-4">
      <div class="card__header">
        <h2 class="card__title">FormWizard - ë‹¨ê³„ë³„ í¼</h2>
        <p class="card__description">ì—¬ëŸ¬ ë‹¨ê³„ë¡œ êµ¬ì„±ëœ í¼ ë§ˆë²•ì‚¬</p>
      </div>
      <div class="card__body">
        <div id="wizard_demo"></div>
        <div id="wizard_result" style="margin-top: 1rem; padding: 1rem; background: var(--bg-secondary); border-radius: 8px; display: none;">
        </div>
      </div>
    </div>
  </div>

  <!-- ì‹¤ì „ ì˜ˆì œ -->
  <div class="col-12">
    <div class="card mb-4">
      <div class="card__header">
        <h2 class="card__title">ğŸ›ï¸ ì‹¤ì „ ì˜ˆì œ - ìƒí’ˆ ë¦¬ë·° ì‘ì„±</h2>
        <p class="card__description">Forms ì»´í¬ë„ŒíŠ¸ë¥¼ í™œìš©í•œ ë¦¬ë·° ì‘ì„± í¼</p>
      </div>
      <div class="card__body">
        <div style="max-width: 600px; margin: 0 auto; padding: 2rem; background: var(--bg-secondary); border-radius: 12px;">
          <h4 style="margin-bottom: 1.5rem;">ìƒí’ˆ ë¦¬ë·°</h4>
          
          <div style="margin-bottom: 1.5rem;">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">í‰ì </label>
            <div id="review_rating"></div>
          </div>
          
          <div style="margin-bottom: 1.5rem;">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">ë¦¬ë·° ë‚´ìš©</label>
            <textarea id="review_content" style="width: 100%; min-height: 120px; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 8px; resize: vertical;" placeholder="ìƒí’ˆì— ëŒ€í•œ ì†”ì§í•œ ë¦¬ë·°ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”..."></textarea>
          </div>
          
          <div style="margin-bottom: 1.5rem;">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">ì‚¬ì§„ ì²¨ë¶€</label>
            <input type="file" id="review_photos">
          </div>
          
          <button onclick="submitReview()" style="width: 100%; padding: 0.75rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer;">
            ë¦¬ë·° ë“±ë¡
          </button>
          
          <div id="review_result" style="margin-top: 1rem; display: none;"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- ì‚¬ìš©ë²• -->
  <div class="col-12">
    <div class="card">
      <div class="card__header">
        <h2 class="card__title">ğŸ“– ì‚¬ìš©ë²•</h2>
      </div>
      <div class="card__body">
        <h3 style="margin-bottom: 1rem;">FileUpload</h3>
        <pre><code>const Forms = await IMCAT.use('forms');

const uploader = new Forms.FileUpload('#file', {
  accept: 'image/*',
  multiple: true,
  maxSize: 5 * 1024 * 1024, // 5MB
  onChange: (files) => console.log(files)
});</code></pre>

        <h3 style="margin-top: 2rem; margin-bottom: 1rem;">Rating</h3>
        <pre><code>const rating = new Forms.Rating('#rating', {
  max: 5,
  value: 0,
  color: '#f59e0b',
  onChange: (value) => console.log('ë³„ì :', value)
});</code></pre>

        <h3 style="margin-top: 2rem; margin-bottom: 1rem;">SignaturePad</h3>
        <pre><code>const signature = new Forms.SignaturePad('#signature', {
  width: 400,
  height: 200,
  penColor: '#000000',
  penWidth: 2
});

// ì„œëª… ì €ì¥
signature.events.on('save', (dataUrl) => {
  // dataUrl = base64 ì´ë¯¸ì§€
});</code></pre>

        <h3 style="margin-top: 2rem; margin-bottom: 1rem;">FormWizard</h3>
        <pre><code>const wizard = new Forms.FormWizard('#wizard', {
  steps: [
    { title: '1ë‹¨ê³„', content: '&lt;input name="field1"&gt;' },
    { title: '2ë‹¨ê³„', content: '&lt;input name="field2"&gt;' },
    { title: 'ì™„ë£Œ', content: '&lt;p&gt;ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p&gt;' }
  ],
  onComplete: (data) => console.log('í¼ ë°ì´í„°:', data)
});</code></pre>
      </div>
    </div>
  </div>
</div>

<!-- JavaScript -->
<script type="module">
  const Forms = await IMCAT.use('forms');
  const instances = [];

  // ============================================
  // FileUpload ì˜ˆì œ
  // ============================================

  // ê¸°ë³¸ ì—…ë¡œë“œ
  const uploadBasic = new Forms.FileUpload('#upload_basic', {
    dropzoneText: 'íŒŒì¼ì„ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì„¸ìš”'
  });
  instances.push(uploadBasic);

  // ì´ë¯¸ì§€ ì—…ë¡œë“œ
  const uploadImages = new Forms.FileUpload('#upload_images', {
    accept: 'image/*',
    multiple: true,
    maxFiles: 5,
    dropzoneText: 'ì´ë¯¸ì§€ë¥¼ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì„¸ìš”'
  });
  instances.push(uploadImages);

  // ë¬¸ì„œ ì—…ë¡œë“œ
  const uploadDocs = new Forms.FileUpload('#upload_docs', {
    accept: '.pdf,.doc,.docx',
    multiple: true,
    maxSize: 20 * 1024 * 1024,
    dropzoneText: 'PDF ë˜ëŠ” Word ë¬¸ì„œë¥¼ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì„¸ìš”'
  });
  instances.push(uploadDocs);

  // ì—…ë¡œë“œ ì‹œë®¬ë ˆì´ì…˜
  const uploadProgress = new Forms.FileUpload('#upload_progress', {
    accept: 'image/*',
    multiple: true,
    maxFiles: 3,
    showProgress: true,
    dropzoneText: 'ì´ë¯¸ì§€ë¥¼ ì„ íƒ í›„ ì—…ë¡œë“œ ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”',
    onChange: (files) => {
      document.getElementById('btn_upload').disabled = files.length === 0;
      document.getElementById('upload_status').textContent = files.length ? `${files.length}ê°œ íŒŒì¼ ì„ íƒë¨` : '';
    },
    onUploadStart: () => {
      document.getElementById('btn_upload').disabled = true;
      document.getElementById('btn_upload').innerHTML = '<i class="material-icons-outlined" style="font-size: 18px; vertical-align: middle;">hourglass_empty</i> ì—…ë¡œë“œ ì¤‘...';
    },
    onUploadComplete: (files) => {
      document.getElementById('btn_upload').innerHTML = '<i class="material-icons-outlined" style="font-size: 18px; vertical-align: middle;">check_circle</i> ì™„ë£Œ!';
      document.getElementById('upload_status').innerHTML = `<span style="color: #22c55e;">âœ… ${files.length}ê°œ íŒŒì¼ ì—…ë¡œë“œ ì™„ë£Œ!</span>`;
      setTimeout(() => {
        document.getElementById('btn_upload').innerHTML = '<i class="material-icons-outlined" style="font-size: 18px; vertical-align: middle;">cloud_upload</i> ì—…ë¡œë“œ ì‹œì‘';
        document.getElementById('btn_upload').disabled = true;
      }, 2000);
    }
  });
  instances.push(uploadProgress);

  // ì—…ë¡œë“œ ì‹œì‘ í•¨ìˆ˜
  window.startUpload = async function() {
    await uploadProgress.simulateUpload(3000); // 3ì´ˆ ì‹œë®¬ë ˆì´ì…˜
  };

  // ============================================
  // Rating ì˜ˆì œ
  // ============================================

  // ê¸°ë³¸ ë³„ì 
  const ratingBasic = new Forms.Rating('#rating_basic', {
    value: 3,
    onChange: (value) => {
      document.getElementById('rating_basic_result').textContent = `ì„ íƒ: ${value}ì `;
    }
  });
  instances.push(ratingBasic);
  document.getElementById('rating_basic_result').textContent = 'ì„ íƒ: 3ì ';

  // Small
  const ratingSm = new Forms.Rating('#rating_sm', {
    size: 'sm',
    value: 4
  });
  instances.push(ratingSm);

  // Large
  const ratingLg = new Forms.Rating('#rating_lg', {
    size: 'lg',
    value: 4
  });
  instances.push(ratingLg);

  // ì»¤ìŠ¤í…€ ìƒ‰ìƒ
  const ratingColor = new Forms.Rating('#rating_color', {
    value: 4,
    color: '#8b5cf6'
  });
  instances.push(ratingColor);

  // 10ì  ë§Œì 
  const rating10 = new Forms.Rating('#rating_10', {
    max: 10,
    value: 7,
    size: 'sm'
  });
  instances.push(rating10);

  // ì½ê¸° ì „ìš©
  const ratingReadonly = new Forms.Rating('#rating_readonly', {
    value: 4,
    readonly: true
  });
  instances.push(ratingReadonly);

  // ============================================
  // SignaturePad ì˜ˆì œ
  // ============================================

  // ê¸°ë³¸ ì„œëª… íŒ¨ë“œ
  const signatureBasic = new Forms.SignaturePad('#signature_basic', {
    width: 350,
    height: 150
  });
  signatureBasic.events.on('save', (dataUrl) => {
    document.getElementById('signature_preview').innerHTML = `<img src="${dataUrl}" style="max-width: 100%; border-radius: 8px;">`;
  });
  instances.push(signatureBasic);

  // ì»¤ìŠ¤í…€ ì„œëª… íŒ¨ë“œ
  const signatureCustom = new Forms.SignaturePad('#signature_custom', {
    width: 350,
    height: 150,
    penColor: '#3b82f6',
    penWidth: 4
  });
  instances.push(signatureCustom);

  // ============================================
  // FormWizard ì˜ˆì œ
  // ============================================

  const wizard = new Forms.FormWizard('#wizard_demo', {
    steps: [
      {
        title: 'ê°œì¸ì •ë³´',
        content: `
          <div style="margin-bottom: 1rem;">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">ì´ë¦„</label>
            <input type="text" name="name" style="width: 100%; padding: 0.625rem; border: 1px solid var(--border-color); border-radius: 6px;" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”">
          </div>
          <div>
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">ì´ë©”ì¼</label>
            <input type="email" name="email" style="width: 100%; padding: 0.625rem; border: 1px solid var(--border-color); border-radius: 6px;" placeholder="ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”">
          </div>
        `,
        validate: () => {
          const name = document.querySelector('[name="name"]').value;
          const email = document.querySelector('[name="email"]').value;
          if (!name || !email) {
            alert('ì´ë¦„ê³¼ ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
            return false;
          }
          return true;
        }
      },
      {
        title: 'ì—°ë½ì²˜',
        content: `
          <div style="margin-bottom: 1rem;">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">ì „í™”ë²ˆí˜¸</label>
            <input type="tel" name="phone" style="width: 100%; padding: 0.625rem; border: 1px solid var(--border-color); border-radius: 6px;" placeholder="ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
          </div>
          <div>
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">ì£¼ì†Œ</label>
            <input type="text" name="address" style="width: 100%; padding: 0.625rem; border: 1px solid var(--border-color); border-radius: 6px;" placeholder="ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”">
          </div>
        `
      },
      {
        title: 'ì™„ë£Œ',
        content: `
          <div style="text-align: center; padding: 2rem;">
            <i class="material-icons-outlined" style="font-size: 64px; color: #22c55e;">check_circle</i>
            <h3 style="margin-top: 1rem; margin-bottom: 0.5rem;">ì…ë ¥ ì™„ë£Œ!</h3>
            <p style="color: var(--text-secondary);">ëª¨ë“  ì •ë³´ê°€ ì…ë ¥ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
          </div>
        `
      }
    ],
    onComplete: (data) => {
      const resultEl = document.getElementById('wizard_result');
      resultEl.style.display = 'block';
      resultEl.innerHTML = `
        <h4 style="margin-bottom: 1rem;">ğŸ“‹ ì…ë ¥ëœ ë°ì´í„°</h4>
        <pre style="background: var(--bg-tertiary); padding: 1rem; border-radius: 6px; overflow-x: auto;">${JSON.stringify(data, null, 2)}</pre>
      `;
    }
  });
  instances.push(wizard);

  // ============================================
  // ì‹¤ì „ ì˜ˆì œ - ìƒí’ˆ ë¦¬ë·°
  // ============================================

  const reviewRating = new Forms.Rating('#review_rating', {
    value: 0,
    size: 'lg'
  });
  instances.push(reviewRating);

  const reviewPhotos = new Forms.FileUpload('#review_photos', {
    accept: 'image/*',
    multiple: true,
    maxFiles: 3,
    dropzoneText: 'ë¦¬ë·° ì‚¬ì§„ì„ ì²¨ë¶€í•˜ì„¸ìš” (ìµœëŒ€ 3ì¥)'
  });
  instances.push(reviewPhotos);

  // ë¦¬ë·° ì œì¶œ í•¨ìˆ˜
  window.submitReview = function() {
    const rating = reviewRating.getValue();
    const content = document.getElementById('review_content').value;
    const photos = reviewPhotos.getFiles();

    if (rating === 0) {
      alert('í‰ì ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
      return;
    }
    if (!content.trim()) {
      alert('ë¦¬ë·° ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
      return;
    }

    const resultEl = document.getElementById('review_result');
    resultEl.style.display = 'block';
    resultEl.innerHTML = `
      <div style="padding: 1rem; background: #22c55e22; border: 1px solid #22c55e; border-radius: 8px; color: #22c55e;">
        <strong>âœ… ë¦¬ë·°ê°€ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!</strong><br>
        í‰ì : ${'â­'.repeat(rating)} (${rating}ì )<br>
        ì‚¬ì§„: ${photos.length}ì¥ ì²¨ë¶€
      </div>
    `;
  };

  // ì¸ìŠ¤í„´ìŠ¤ ë“±ë¡
  instances.forEach(inst => IMCAT.view.registerInstance(inst));

  console.log('Forms ì˜ˆì œ ë¡œë“œ ì™„ë£Œ');
</script>

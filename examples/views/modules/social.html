<!-- Breadcrumb -->
<div class="page-title-box">
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="#" catui-href="views/home.html">Home</a></li>
      <li class="breadcrumb-item"><a href="#" catui-href="views/modules.html">Modules</a></li>
      <li class="breadcrumb-item active" aria-current="page">Social</li>
    </ol>
  </nav>
  <h1 class="page-title">Social Components</h1>
  <p class="page-description">Chat UI, Comments, Share Buttons, Reactions ë“± ì†Œì…œ ê¸°ëŠ¥ ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤.</p>
</div>

<!-- Chat UI -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card">
      <div class="card__header">
        <h2 class="card__title">Chat UI</h2>
        <p class="card__description">ì‹¤ì‹œê°„ ì±„íŒ… ì¸í„°í˜ì´ìŠ¤ì…ë‹ˆë‹¤.</p>
      </div>
      <div class="card__body">
        <div id="chat_demo" style="height: 500px; max-width: 600px;"></div>
        
        <div class="d-flex gap-2 flex-wrap mt-3">
          <button class="btn btn--outline-primary btn--sm" onclick="showTyping()">íƒ€ì´í•‘ í‘œì‹œ</button>
          <button class="btn btn--outline-primary btn--sm" onclick="receiveMessage()">ë©”ì‹œì§€ ë°›ê¸°</button>
          <button class="btn btn--outline-secondary btn--sm" onclick="chatUI.clearMessages()">ëŒ€í™” ì§€ìš°ê¸°</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Comments -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card">
      <div class="card__header">
        <h2 class="card__title">Comments</h2>
        <p class="card__description">ëŒ“ê¸€/ë‹µê¸€ ì‹œìŠ¤í…œì…ë‹ˆë‹¤. ì¢‹ì•„ìš”, ìˆ˜ì •, ì‚­ì œ, ë‹µê¸€ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.</p>
      </div>
      <div class="card__body">
        <div id="comments_demo" style="max-width: 800px;"></div>
      </div>
    </div>
  </div>
</div>

<!-- Share Buttons -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card">
      <div class="card__header">
        <h2 class="card__title">Share Buttons</h2>
        <p class="card__description">ì†Œì…œ ê³µìœ  ë²„íŠ¼ì…ë‹ˆë‹¤.</p>
      </div>
      <div class="card__body">
        <h5 class="mb-3">ê¸°ë³¸ (ìˆ˜í‰)</h5>
        <div id="share_horizontal" class="mb-4"></div>
        
        <h5 class="mb-3">ìˆ˜ì§ ë ˆì´ì•„ì›ƒ</h5>
        <div id="share_vertical" class="mb-4"></div>
        
        <h5 class="mb-3">ë¼ë²¨ í‘œì‹œ</h5>
        <div id="share_labels" class="mb-4"></div>
        
        <h5 class="mb-3">í¬ê¸° ë³€í˜•</h5>
        <div class="d-flex gap-4 align-items-center flex-wrap">
          <div>
            <span class="text-secondary d-block mb-2">Small</span>
            <div id="share_sm"></div>
          </div>
          <div>
            <span class="text-secondary d-block mb-2">Medium</span>
            <div id="share_md"></div>
          </div>
          <div>
            <span class="text-secondary d-block mb-2">Large</span>
            <div id="share_lg"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Reactions -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card">
      <div class="card__header">
        <h2 class="card__title">Reactions</h2>
        <p class="card__description">ì´ëª¨ì§€ ë¦¬ì•¡ì…˜ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.</p>
      </div>
      <div class="card__body">
        <h5 class="mb-3">ê¸°ë³¸ ë¦¬ì•¡ì…˜</h5>
        <div id="reactions_demo" class="mb-4"></div>
        
        <h5 class="mb-3">ì¹´ìš´íŠ¸ í¬í•¨</h5>
        <div id="reactions_count"></div>
      </div>
    </div>
  </div>
</div>

<!-- Code Example -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card">
      <div class="card__header">
        <h2 class="card__title">ì‚¬ìš©ë²•</h2>
      </div>
      <div class="card__body">
        <pre><code class="language-javascript">// ëª¨ë“ˆ ë¡œë“œ
const Social = await IMCAT.use('social');

// Chat UI - ì±„íŒ… ì¸í„°í˜ì´ìŠ¤
const chat = new Social.ChatUI('#chat', {
  messages: [],               // ì´ˆê¸° ë©”ì‹œì§€ ë°°ì—´
  currentUser: { id: 'user1', name: 'ë‚˜', avatar: '' },
  placeholder: 'ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”...',
  showTimestamp: true,
  showAvatar: true,
  groupMessages: true,        // ê°™ì€ ìœ ì € ë©”ì‹œì§€ ê·¸ë£¹í™”
  onSend: (message) => console.log('Sent:', message),
  onTyping: () => console.log('Typing...')
});

// Chat API
chat.addMessage({ userId: 'user2', userName: 'ìƒëŒ€ë°©', text: 'ì•ˆë…•!' });
chat.setMessages([...]);
chat.clearMessages();
chat.showTyping([{ name: 'ìƒëŒ€ë°©' }]);
chat.hideTyping();

// Comments - ëŒ“ê¸€ ì‹œìŠ¤í…œ
const comments = new Social.Comments('#comments', {
  comments: [],
  currentUser: { id: 'me', name: 'ë‚´ ì´ë¦„', avatar: '' },
  allowReplies: true,
  allowEdit: true,
  allowDelete: true,
  maxDepth: 3,                // ë‹µê¸€ ìµœëŒ€ ê¹Šì´
  placeholder: 'ëŒ“ê¸€ì„ ì…ë ¥í•˜ì„¸ìš”...',
  onSubmit: (comment) => console.log('New comment:', comment),
  onEdit: (id, newText) => console.log('Edited:', id),
  onDelete: (id) => console.log('Deleted:', id),
  onLike: (id) => console.log('Liked:', id)
});

// Comments API
comments.addComment({ ... });
comments.setComments([...]);

// Share Buttons - ê³µìœ  ë²„íŠ¼
const share = new Social.ShareButtons('#share', {
  url: 'https://example.com',
  title: 'ê³µìœ  ì œëª©',
  description: 'ê³µìœ  ì„¤ëª…',
  platforms: ['copy', 'twitter', 'facebook', 'linkedin', 'email'],
  layout: 'horizontal',      // 'horizontal' | 'vertical'
  size: 'md',                // 'sm' | 'md' | 'lg'
  showLabels: false,
  onShare: (platform) => console.log('Shared to:', platform)
});

// Share API
share.setUrl('new-url');
share.setTitle('new-title');

// Reactions - ë¦¬ì•¡ì…˜
const reactions = new Social.Reactions('#reactions', {
  reactions: [
    { emoji: 'ğŸ‘', label: 'ì¢‹ì•„ìš”', count: 0, active: false },
    { emoji: 'â¤ï¸', label: 'ì‚¬ë‘í•´ìš”', count: 5, active: false },
    { emoji: 'ğŸ˜‚', label: 'ì›ƒê²¨ìš”', count: 2, active: true }
  ],
  onReact: (emoji, active) => console.log(emoji, active)
});

// Reactions API
reactions.setReactions([...]);
const state = reactions.getReactions();

// ë©”ëª¨ë¦¬ ê´€ë¦¬
IMCAT.view.registerInstance(chat);
IMCAT.view.registerInstance(comments);
IMCAT.view.registerInstance(share);
IMCAT.view.registerInstance(reactions);</code></pre>
      </div>
    </div>
  </div>
</div>

<script type="module">
// ëª¨ë“ˆ ë¡œë“œ
window.SocialModule = await IMCAT.use('social');
const { ChatUI, Comments, ShareButtons, Reactions } = SocialModule;

// Chat UI ë°ëª¨
const sampleMessages = [
  { id: '1', userId: 'user2', userName: 'ê¹€ì² ìˆ˜', text: 'ì•ˆë…•í•˜ì„¸ìš”! ì˜¤ëŠ˜ íšŒì˜ ì¼ì • í™•ì¸í•˜ì…¨ë‚˜ìš”?', timestamp: new Date(Date.now() - 3600000).toISOString() },
  { id: '2', userId: 'user1', userName: 'ë‚˜', text: 'ë„¤, í™•ì¸í–ˆì–´ìš”. ì˜¤í›„ 3ì‹œ ë§ì£ ?', timestamp: new Date(Date.now() - 3500000).toISOString() },
  { id: '3', userId: 'user2', userName: 'ê¹€ì² ìˆ˜', text: 'ë§ìŠµë‹ˆë‹¤! íšŒì˜ì‹¤ Aì—ì„œ ì§„í–‰í•©ë‹ˆë‹¤.', timestamp: new Date(Date.now() - 3400000).toISOString() },
  { id: '4', userId: 'user2', userName: 'ê¹€ì² ìˆ˜', text: 'ìë£ŒëŠ” ë¯¸ë¦¬ ê³µìœ í•´ ë“œë¦´ê²Œìš”.', timestamp: new Date(Date.now() - 3300000).toISOString() },
  { id: '5', userId: 'user1', userName: 'ë‚˜', text: 'ë„¤, ê°ì‚¬í•©ë‹ˆë‹¤! ğŸ‘', timestamp: new Date(Date.now() - 60000).toISOString() },
];

window.chatUI = new ChatUI('#chat_demo', {
  messages: sampleMessages,
  currentUser: { id: 'user1', name: 'ë‚˜', avatar: '' },
  onSend: (msg) => console.log('Message sent:', msg),
  onTyping: () => console.log('User is typing...')
});
IMCAT.view.registerInstance(chatUI);

window.showTyping = function() {
  chatUI.showTyping([{ name: 'ê¹€ì² ìˆ˜' }]);
  setTimeout(() => chatUI.hideTyping(), 3000);
};

window.receiveMessage = function() {
  chatUI.addMessage({
    id: Date.now().toString(),
    userId: 'user2',
    userName: 'ê¹€ì² ìˆ˜',
    text: 'ìƒˆë¡œìš´ ë©”ì‹œì§€ê°€ ë„ì°©í–ˆìŠµë‹ˆë‹¤! ğŸ‰',
    timestamp: new Date().toISOString()
  });
};

// Comments ë°ëª¨
const sampleComments = [
  {
    id: '1',
    userId: 'user2',
    userName: 'ì´ì˜í¬',
    text: 'ì •ë§ ìœ ìš©í•œ ê¸€ì´ë„¤ìš”! ë§ì€ ë„ì›€ì´ ëìŠµë‹ˆë‹¤.',
    createdAt: new Date(Date.now() - 86400000).toISOString(),
    likes: 12,
    liked: false,
    replies: [
      {
        id: '1-1',
        userId: 'user3',
        userName: 'ë°•ë¯¼ìˆ˜',
        text: 'ì €ë„ ë™ì˜í•©ë‹ˆë‹¤. íŠ¹íˆ ì‹¤ë¬´ ì˜ˆì œê°€ ì¢‹ì•˜ì–´ìš”.',
        createdAt: new Date(Date.now() - 43200000).toISOString(),
        likes: 3,
        liked: false,
        replies: []
      }
    ]
  },
  {
    id: '2',
    userId: 'user4',
    userName: 'ìµœì§€í›ˆ',
    text: 'ì§ˆë¬¸ì´ ìˆëŠ”ë°ìš”, ì´ ë°©ë²•ì„ React í”„ë¡œì íŠ¸ì—ë„ ì ìš©í•  ìˆ˜ ìˆë‚˜ìš”?',
    createdAt: new Date(Date.now() - 7200000).toISOString(),
    likes: 5,
    liked: true,
    replies: []
  }
];

window.commentsUI = new Comments('#comments_demo', {
  comments: sampleComments,
  currentUser: { id: 'user1', name: 'ë‚´ ë‹‰ë„¤ì„', avatar: '' },
  allowReplies: true,
  allowEdit: true,
  allowDelete: true,
  onSubmit: (comment) => console.log('New comment:', comment),
  onEdit: (id, text) => console.log('Edit:', id, text),
  onDelete: (id) => console.log('Delete:', id),
  onLike: (id) => console.log('Like:', id)
});
IMCAT.view.registerInstance(commentsUI);

// Share Buttons ë°ëª¨
window.shareHorizontal = new ShareButtons('#share_horizontal', {
  url: window.location.href,
  title: 'IMCAT UI Framework',
  platforms: ['copy', 'twitter', 'facebook', 'linkedin', 'email'],
  size: 'md',
  onShare: (p) => console.log('Shared to:', p)
});
IMCAT.view.registerInstance(shareHorizontal);

window.shareVertical = new ShareButtons('#share_vertical', {
  url: window.location.href,
  title: 'IMCAT UI Framework',
  platforms: ['copy', 'twitter', 'facebook'],
  layout: 'vertical',
  size: 'md'
});
IMCAT.view.registerInstance(shareVertical);

window.shareLabels = new ShareButtons('#share_labels', {
  url: window.location.href,
  title: 'IMCAT UI Framework',
  platforms: ['copy', 'twitter', 'facebook'],
  size: 'md',
  showLabels: true
});
IMCAT.view.registerInstance(shareLabels);

// Size variants
window.shareSm = new ShareButtons('#share_sm', {
  platforms: ['copy', 'twitter', 'facebook'],
  size: 'sm'
});
IMCAT.view.registerInstance(shareSm);

window.shareMd = new ShareButtons('#share_md', {
  platforms: ['copy', 'twitter', 'facebook'],
  size: 'md'
});
IMCAT.view.registerInstance(shareMd);

window.shareLg = new ShareButtons('#share_lg', {
  platforms: ['copy', 'twitter', 'facebook'],
  size: 'lg'
});
IMCAT.view.registerInstance(shareLg);

// Reactions ë°ëª¨
window.reactionsBasic = new Reactions('#reactions_demo', {
  onReact: (emoji, active) => console.log(`${emoji} ${active ? 'selected' : 'deselected'}`)
});
IMCAT.view.registerInstance(reactionsBasic);

window.reactionsCount = new Reactions('#reactions_count', {
  reactions: [
    { emoji: 'ğŸ‘', label: 'ì¢‹ì•„ìš”', count: 24, active: false },
    { emoji: 'â¤ï¸', label: 'ì‚¬ë‘í•´ìš”', count: 12, active: true },
    { emoji: 'ğŸ˜‚', label: 'ì›ƒê²¨ìš”', count: 8, active: false },
    { emoji: 'ğŸ˜®', label: 'ë†€ëì–´ìš”', count: 3, active: false },
    { emoji: 'ğŸ˜¢', label: 'ìŠ¬í¼ìš”', count: 1, active: false },
    { emoji: 'ğŸ˜¡', label: 'í™”ë‚˜ìš”', count: 0, active: false }
  ],
  onReact: (emoji, active) => console.log(`${emoji} ${active ? 'selected' : 'deselected'}`)
});
IMCAT.view.registerInstance(reactionsCount);
</script>

<!-- Breadcrumb -->
<div class="page-title-box">
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="#" catui-href="views/home.html">Home</a></li>
      <li class="breadcrumb-item"><a href="#" catui-href="views/modules.html">Modules</a></li>
      <li class="breadcrumb-item active" aria-current="page">Stepper</li>
    </ol>
  </nav>
  <h1 class="page-title">Stepper</h1>
  <p class="page-description">단계별 진행 표시 컴포넌트. 폼 위저드, 체크아웃 프로세스, 가이드 투어 등에 활용합니다.</p>
</div>

<!-- Basic Horizontal Stepper -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card">
      <div class="card__header">
        <h2 class="card__title">기본 스텝퍼 (수평)</h2>
        <p class="card__description">가장 기본적인 수평 스텝퍼입니다.</p>
      </div>
      <div class="card__body">
        <div id="stepper_basic"></div>
        
        <div class="mt-4 d-flex gap-2">
          <button class="btn btn--outline-secondary" onclick="basicStepper.prev()">이전</button>
          <button class="btn btn--primary" onclick="basicStepper.next()">다음</button>
          <button class="btn btn--outline-danger ms-auto" onclick="basicStepper.reset()">초기화</button>
        </div>
        
        <div class="mt-4 p-3 bg-secondary-subtle rounded">
          <strong>현재 단계:</strong> <span id="basic_current">1</span> / 4
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Vertical Stepper -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card">
      <div class="card__header">
        <h2 class="card__title">수직 스텝퍼</h2>
        <p class="card__description">세로 방향으로 표시되는 스텝퍼입니다.</p>
      </div>
      <div class="card__body">
        <div id="stepper_vertical" style="max-width: 400px;"></div>
        
        <div class="mt-4 d-flex gap-2">
          <button class="btn btn--outline-secondary" onclick="verticalStepper.prev()">이전</button>
          <button class="btn btn--primary" onclick="verticalStepper.next()">다음</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Stepper with Content -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card">
      <div class="card__header">
        <h2 class="card__title">콘텐츠가 있는 스텝퍼</h2>
        <p class="card__description">각 단계별로 콘텐츠를 표시합니다.</p>
      </div>
      <div class="card__body">
        <div id="stepper_content"></div>
      </div>
    </div>
  </div>
</div>

<!-- Size Variants -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card">
      <div class="card__header">
        <h2 class="card__title">크기 변형</h2>
        <p class="card__description">Small, Medium, Large 크기를 지원합니다.</p>
      </div>
      <div class="card__body">
        <h4 class="mb-3">Small</h4>
        <div id="stepper_sm" class="mb-4"></div>
        
        <h4 class="mb-3">Medium (기본)</h4>
        <div id="stepper_md" class="mb-4"></div>
        
        <h4 class="mb-3">Large</h4>
        <div id="stepper_lg"></div>
      </div>
    </div>
  </div>
</div>

<!-- Dots Variant -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card">
      <div class="card__header">
        <h2 class="card__title">Dots 스타일</h2>
        <p class="card__description">간결한 점 형태의 스텝퍼입니다.</p>
      </div>
      <div class="card__body">
        <div id="stepper_dots" class="mb-4"></div>
        
        <div class="d-flex gap-2">
          <button class="btn btn--outline-secondary btn--sm" onclick="dotsStepper.prev()">이전</button>
          <button class="btn btn--primary btn--sm" onclick="dotsStepper.next()">다음</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Linear Stepper -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card">
      <div class="card__header">
        <h2 class="card__title">순차 진행 스텝퍼</h2>
        <p class="card__description">이전 단계를 완료해야만 다음 단계로 이동할 수 있습니다.</p>
      </div>
      <div class="card__body">
        <div id="stepper_linear"></div>
        
        <div class="mt-4 d-flex gap-2">
          <button class="btn btn--outline-secondary" onclick="linearStepper.prev()">이전</button>
          <button class="btn btn--primary" onclick="linearStepper.next()">다음</button>
          <button class="btn btn--outline-danger ms-auto" onclick="linearStepper.reset()">초기화</button>
        </div>
        
        <div class="mt-3 alert alert--info">
          <i class="material-icons-outlined">info</i>
          <span>순차 모드에서는 단계를 건너뛸 수 없습니다. "다음" 버튼으로 진행하세요.</span>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Vertical Stepper with Inline Content -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card">
      <div class="card__header">
        <h2 class="card__title">인라인 콘텐츠 수직 스텝퍼</h2>
        <p class="card__description">각 단계의 콘텐츠가 인라인으로 표시되며, 완료된 단계는 접히고 수정할 수 있습니다.</p>
      </div>
      <div class="card__body">
        <div id="stepper_inline"></div>
      </div>
    </div>
  </div>
</div>

<!-- Checkout Example -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card">
      <div class="card__header">
        <h2 class="card__title">실전 예제: 결제 프로세스</h2>
        <p class="card__description">실제 결제 과정을 구현한 예제입니다.</p>
      </div>
      <div class="card__body">
        <div id="stepper_checkout"></div>
      </div>
    </div>
  </div>
</div>

<!-- Code Example -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card">
      <div class="card__header">
        <h2 class="card__title">사용법</h2>
      </div>
      <div class="card__body">
        <pre><code class="language-javascript">// 모듈 로드
const StepperModule = await IMCAT.use('stepper');

// 기본 스텝퍼
const stepper = new StepperModule.Stepper('#container', {
  steps: [
    { title: '단계 1', subtitle: '설명' },
    { title: '단계 2', subtitle: '설명' },
    { title: '단계 3', subtitle: '설명' }
  ],
  orientation: 'horizontal', // 'horizontal' | 'vertical'
  clickable: true,
  linear: false,
  size: 'md',               // 'sm' | 'md' | 'lg'
  variant: 'default',       // 'default' | 'dots' | 'pills'
  onChange: (step, prevStep) => {
    console.log(`Step changed: ${prevStep} → ${step}`);
  },
  onComplete: () => {
    console.log('All steps completed!');
  }
});

// 메서드
stepper.next();           // 다음 단계
stepper.prev();           // 이전 단계
stepper.goTo(2);          // 특정 단계로 이동
stepper.complete(1);      // 단계 완료 처리
stepper.reset();          // 초기화
stepper.getCurrentStep(); // 현재 단계 반환
stepper.isComplete();     // 완료 여부

// 인라인 수직 스텝퍼
const vStepper = new StepperModule.VerticalStepper('#container', {
  steps: [
    { 
      title: '배송 정보',
      content: '&lt;form&gt;...&lt;/form&gt;'
    },
    { 
      title: '결제 방법',
      content: '&lt;div&gt;...&lt;/div&gt;'
    }
  ],
  editable: true,   // 완료된 단계 수정 가능
  expandable: true  // 펼치기/접기 가능
});

// 메모리 관리
IMCAT.view.registerInstance(stepper);</code></pre>
      </div>
    </div>
  </div>
</div>

<script type="module">
// 모듈 로드
const StepperModule = await IMCAT.use('stepper');
const { Stepper, VerticalStepper } = StepperModule;

// 기본 스텝퍼
window.basicStepper = new Stepper('#stepper_basic', {
  steps: [
    { title: '계정 생성', subtitle: '기본 정보 입력' },
    { title: '프로필 설정', subtitle: '상세 정보 입력' },
    { title: '관심사 선택', subtitle: '맞춤 추천용' },
    { title: '완료', subtitle: '가입 완료' }
  ],
  orientation: 'horizontal',
  onChange: (step) => {
    document.getElementById('basic_current').textContent = step + 1;
  }
});
IMCAT.view.registerInstance(basicStepper);

// 수직 스텝퍼
window.verticalStepper = new Stepper('#stepper_vertical', {
  steps: [
    { title: '주문 접수', icon: 'receipt_long' },
    { title: '결제 확인', icon: 'payments' },
    { title: '배송 준비', icon: 'inventory' },
    { title: '배송 중', icon: 'local_shipping' },
    { title: '배송 완료', icon: 'check_circle' }
  ],
  orientation: 'vertical',
  currentStep: 2
});
IMCAT.view.registerInstance(verticalStepper);
// 2번째까지 완료 처리
verticalStepper.complete(0);
verticalStepper.complete(1);

// 콘텐츠 스텝퍼
const contentStepper = new Stepper('#stepper_content', {
  steps: [
    { 
      title: '기본 정보',
      content: `
        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label">이름</label>
            <input type="text" class="form-control" placeholder="홍길동">
          </div>
          <div class="col-md-6">
            <label class="form-label">이메일</label>
            <input type="email" class="form-control" placeholder="email@example.com">
          </div>
        </div>
        <div class="mt-3 d-flex gap-2">
          <button class="btn btn--primary" onclick="contentStepperNext()">다음</button>
        </div>
      `
    },
    { 
      title: '상세 정보',
      content: `
        <div class="mb-3">
          <label class="form-label">주소</label>
          <input type="text" class="form-control" placeholder="주소를 입력하세요">
        </div>
        <div class="mb-3">
          <label class="form-label">전화번호</label>
          <input type="tel" class="form-control" placeholder="010-0000-0000">
        </div>
        <div class="d-flex gap-2">
          <button class="btn btn--outline-secondary" onclick="contentStepperPrev()">이전</button>
          <button class="btn btn--primary" onclick="contentStepperNext()">다음</button>
        </div>
      `
    },
    { 
      title: '확인',
      content: `
        <div class="text-center py-4">
          <i class="material-icons-outlined" style="font-size: 64px; color: var(--success-color);">check_circle</i>
          <h3 class="mt-3">등록 완료!</h3>
          <p class="text-secondary">모든 정보가 성공적으로 등록되었습니다.</p>
        </div>
        <div class="d-flex gap-2 justify-content-center">
          <button class="btn btn--outline-secondary" onclick="contentStepperPrev()">이전</button>
          <button class="btn btn--primary" onclick="alert('완료!')">완료</button>
        </div>
      `
    }
  ]
});
IMCAT.view.registerInstance(contentStepper);
window.contentStepperNext = () => contentStepper.next();
window.contentStepperPrev = () => contentStepper.prev();

// 크기 변형
const smStepper = new Stepper('#stepper_sm', {
  steps: [
    { title: 'Step 1' },
    { title: 'Step 2' },
    { title: 'Step 3' }
  ],
  size: 'sm',
  currentStep: 1
});
smStepper.complete(0);
IMCAT.view.registerInstance(smStepper);

const mdStepper = new Stepper('#stepper_md', {
  steps: [
    { title: 'Step 1' },
    { title: 'Step 2' },
    { title: 'Step 3' }
  ],
  size: 'md',
  currentStep: 1
});
mdStepper.complete(0);
IMCAT.view.registerInstance(mdStepper);

const lgStepper = new Stepper('#stepper_lg', {
  steps: [
    { title: 'Step 1' },
    { title: 'Step 2' },
    { title: 'Step 3' }
  ],
  size: 'lg',
  currentStep: 1
});
lgStepper.complete(0);
IMCAT.view.registerInstance(lgStepper);

// Dots 스타일
window.dotsStepper = new Stepper('#stepper_dots', {
  steps: [
    { title: '슬라이드 1' },
    { title: '슬라이드 2' },
    { title: '슬라이드 3' },
    { title: '슬라이드 4' },
    { title: '슬라이드 5' }
  ],
  variant: 'dots',
  currentStep: 2
});
dotsStepper.complete(0);
dotsStepper.complete(1);
IMCAT.view.registerInstance(dotsStepper);

// 순차 진행 스텝퍼
window.linearStepper = new Stepper('#stepper_linear', {
  steps: [
    { title: '약관 동의', subtitle: '필수' },
    { title: '본인 인증', subtitle: '필수' },
    { title: '정보 입력', subtitle: '필수' },
    { title: '가입 완료', subtitle: '' }
  ],
  linear: true,
  clickable: true
});
IMCAT.view.registerInstance(linearStepper);

// 인라인 수직 스텝퍼
const inlineStepper = new VerticalStepper('#stepper_inline', {
  steps: [
    {
      title: '배송 정보',
      subtitle: '받으실 주소를 입력해주세요',
      icon: 'local_shipping',
      content: `
        <div class="mb-3">
          <label class="form-label">수령인</label>
          <input type="text" class="form-control" value="홍길동">
        </div>
        <div class="mb-3">
          <label class="form-label">연락처</label>
          <input type="tel" class="form-control" value="010-1234-5678">
        </div>
        <div class="mb-3">
          <label class="form-label">배송 주소</label>
          <input type="text" class="form-control" value="서울시 강남구 테헤란로 123">
        </div>
      `
    },
    {
      title: '결제 수단',
      subtitle: '결제 방법을 선택해주세요',
      icon: 'credit_card',
      content: `
        <div class="mb-3">
          <div class="form-check mb-2">
            <input type="radio" name="payment" id="pay1" class="form-check-input" checked>
            <label for="pay1" class="form-check-label">신용카드</label>
          </div>
          <div class="form-check mb-2">
            <input type="radio" name="payment" id="pay2" class="form-check-input">
            <label for="pay2" class="form-check-label">무통장입금</label>
          </div>
          <div class="form-check">
            <input type="radio" name="payment" id="pay3" class="form-check-input">
            <label for="pay3" class="form-check-label">카카오페이</label>
          </div>
        </div>
      `
    },
    {
      title: '주문 확인',
      subtitle: '주문 내역을 확인해주세요',
      icon: 'receipt',
      content: `
        <div class="p-3 bg-secondary-subtle rounded">
          <div class="d-flex justify-content-between mb-2">
            <span>상품금액</span>
            <strong>89,000원</strong>
          </div>
          <div class="d-flex justify-content-between mb-2">
            <span>배송비</span>
            <strong>무료</strong>
          </div>
          <hr>
          <div class="d-flex justify-content-between">
            <span>총 결제금액</span>
            <strong style="color: var(--primary-color); font-size: 1.2em;">89,000원</strong>
          </div>
        </div>
      `
    }
  ],
  editable: true,
  expandable: true
});
IMCAT.view.registerInstance(inlineStepper);

// 결제 예제
const checkoutStepper = new VerticalStepper('#stepper_checkout', {
  steps: [
    {
      title: '장바구니 확인',
      icon: 'shopping_cart',
      content: `
        <div style="display: flex; gap: 16px; align-items: center; padding: 12px; background: var(--bg-secondary); border-radius: 8px; margin-bottom: 12px;">
          <div style="width: 60px; height: 60px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 8px; display: flex; align-items: center; justify-content: center;">
            <i class="material-icons-outlined" style="color: white;">headphones</i>
          </div>
          <div style="flex: 1;">
            <div style="font-weight: 600;">무선 블루투스 이어폰</div>
            <div style="font-size: 13px; color: var(--text-secondary);">색상: 화이트 / 수량: 1</div>
          </div>
          <div style="font-weight: 600;">89,000원</div>
        </div>
        <div style="display: flex; gap: 16px; align-items: center; padding: 12px; background: var(--bg-secondary); border-radius: 8px;">
          <div style="width: 60px; height: 60px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); border-radius: 8px; display: flex; align-items: center; justify-content: center;">
            <i class="material-icons-outlined" style="color: white;">watch</i>
          </div>
          <div style="flex: 1;">
            <div style="font-weight: 600;">스마트 워치 Pro</div>
            <div style="font-size: 13px; color: var(--text-secondary);">색상: 블랙 / 수량: 1</div>
          </div>
          <div style="font-weight: 600;">299,000원</div>
        </div>
      `
    },
    {
      title: '배송지 입력',
      icon: 'location_on',
      content: `
        <div class="row g-3">
          <div class="col-6">
            <label class="form-label">수령인</label>
            <input type="text" class="form-control" value="김철수">
          </div>
          <div class="col-6">
            <label class="form-label">연락처</label>
            <input type="tel" class="form-control" value="010-9876-5432">
          </div>
          <div class="col-12">
            <label class="form-label">배송 주소</label>
            <input type="text" class="form-control" value="서울시 서초구 반포대로 123, 456동 789호">
          </div>
          <div class="col-12">
            <label class="form-label">배송 메모</label>
            <select class="form-select">
              <option>문 앞에 놓아주세요</option>
              <option>경비실에 맡겨주세요</option>
              <option>배송 전 연락주세요</option>
            </select>
          </div>
        </div>
      `
    },
    {
      title: '결제하기',
      icon: 'payment',
      content: `
        <div class="p-4 bg-secondary-subtle rounded mb-3">
          <div class="d-flex justify-content-between mb-2">
            <span>상품금액</span>
            <span>388,000원</span>
          </div>
          <div class="d-flex justify-content-between mb-2">
            <span>배송비</span>
            <span>무료</span>
          </div>
          <div class="d-flex justify-content-between mb-2" style="color: var(--danger-color);">
            <span>할인금액</span>
            <span>-20,000원</span>
          </div>
          <hr>
          <div class="d-flex justify-content-between">
            <strong>최종 결제금액</strong>
            <strong style="color: var(--primary-color); font-size: 1.3em;">368,000원</strong>
          </div>
        </div>
        <button class="btn btn--primary btn--lg w-100" onclick="alert('결제가 완료되었습니다!')">
          <i class="material-icons-outlined me-2">lock</i>
          안전하게 결제하기
        </button>
      `
    }
  ],
  editable: true
});
IMCAT.view.registerInstance(checkoutStepper);
</script>

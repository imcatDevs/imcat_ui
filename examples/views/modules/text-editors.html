<!-- Breadcrumb -->
<div class="page-title-box">
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="#" catui-href="views/home.html">Home</a></li>
      <li class="breadcrumb-item"><a href="#" catui-href="views/modules.html">Modules</a></li>
      <li class="breadcrumb-item active" aria-current="page">Text Editors</li>
    </ol>
  </nav>
  <h1 class="page-title">Text Editors</h1>
  <p class="page-description">Rich Text Editor, Markdown Editor 등 텍스트 편집 컴포넌트입니다.</p>
</div>

<!-- Rich Text Editor -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card">
      <div class="card__header">
        <h2 class="card__title">Rich Text Editor</h2>
        <p class="card__description">간단한 WYSIWYG 에디터입니다. 툴바를 사용하거나 단축키(Ctrl+B, Ctrl+I, Ctrl+U)를 사용할 수 있습니다.</p>
      </div>
      <div class="card__body">
        <div id="rich_editor_demo" class="mb-3"></div>
        
        <div class="d-flex gap-2 flex-wrap">
          <button class="btn btn--primary btn--sm" onclick="getRichContent()">HTML 가져오기</button>
          <button class="btn btn--outline-secondary btn--sm" onclick="clearRichEditor()">내용 지우기</button>
        </div>
        
        <div id="rich_output" class="mt-3 p-3 rounded" style="background: var(--bg-secondary); display: none;">
          <strong>HTML 출력:</strong>
          <pre class="mt-2 mb-0" style="white-space: pre-wrap;"><code id="rich_html"></code></pre>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Markdown Editor - Split View -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card">
      <div class="card__header">
        <h2 class="card__title">Markdown Editor (Split View)</h2>
        <p class="card__description">실시간 미리보기가 있는 마크다운 에디터입니다. 왼쪽에 마크다운을 작성하면 오른쪽에서 결과를 확인할 수 있습니다.</p>
      </div>
      <div class="card__body">
        <div id="markdown_split_demo" style="min-height: 400px;"></div>
        
        <div class="d-flex gap-2 flex-wrap mt-3">
          <button class="btn btn--primary btn--sm" onclick="getMarkdownContent()">마크다운 가져오기</button>
          <button class="btn btn--outline-primary btn--sm" onclick="getMarkdownHTML()">HTML 가져오기</button>
          <button class="btn btn--outline-secondary btn--sm" onclick="insertSampleMarkdown()">샘플 삽입</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Markdown Editor - Tab View -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card">
      <div class="card__header">
        <h2 class="card__title">Markdown Editor (Tab View)</h2>
        <p class="card__description">편집/미리보기 탭으로 전환하는 마크다운 에디터입니다. 모바일에 적합합니다.</p>
      </div>
      <div class="card__body">
        <div id="markdown_tabs_demo" style="min-height: 300px;"></div>
      </div>
    </div>
  </div>
</div>

<!-- Textarea Autosize -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card">
      <div class="card__header">
        <h2 class="card__title">Textarea Autosize</h2>
        <p class="card__description">내용에 따라 자동으로 높이가 조절되는 텍스트 영역입니다.</p>
      </div>
      <div class="card__body">
        <textarea id="autosize_demo" class="form-control" placeholder="내용을 입력하면 자동으로 높이가 조절됩니다..."></textarea>
        
        <div class="alert alert--info mt-3">
          <i class="material-icons-outlined">info</i>
          <span>최소 2줄, 최대 10줄까지 자동으로 늘어납니다.</span>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Markdown Syntax Reference -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card">
      <div class="card__header">
        <h2 class="card__title">마크다운 문법 참고</h2>
      </div>
      <div class="card__body">
        <div class="row g-4">
          <div class="col-md-6">
            <table class="table table--bordered table--sm">
              <thead>
                <tr>
                  <th>문법</th>
                  <th>결과</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><code># 제목 1</code></td>
                  <td><strong style="font-size: 1.5em;">제목 1</strong></td>
                </tr>
                <tr>
                  <td><code>## 제목 2</code></td>
                  <td><strong style="font-size: 1.25em;">제목 2</strong></td>
                </tr>
                <tr>
                  <td><code>**굵게**</code></td>
                  <td><strong>굵게</strong></td>
                </tr>
                <tr>
                  <td><code>_기울임_</code></td>
                  <td><em>기울임</em></td>
                </tr>
                <tr>
                  <td><code>~~취소선~~</code></td>
                  <td><del>취소선</del></td>
                </tr>
                <tr>
                  <td><code>`인라인 코드`</code></td>
                  <td><code>인라인 코드</code></td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="col-md-6">
            <table class="table table--bordered table--sm">
              <thead>
                <tr>
                  <th>문법</th>
                  <th>설명</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><code>[링크](url)</code></td>
                  <td>링크 삽입</td>
                </tr>
                <tr>
                  <td><code>![이미지](url)</code></td>
                  <td>이미지 삽입</td>
                </tr>
                <tr>
                  <td><code>- 항목</code></td>
                  <td>순서 없는 목록</td>
                </tr>
                <tr>
                  <td><code>1. 항목</code></td>
                  <td>순서 있는 목록</td>
                </tr>
                <tr>
                  <td><code>> 인용</code></td>
                  <td>인용구</td>
                </tr>
                <tr>
                  <td><code>---</code></td>
                  <td>구분선</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Code Example -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card">
      <div class="card__header">
        <h2 class="card__title">사용법</h2>
      </div>
      <div class="card__body">
        <pre><code class="language-javascript">// 모듈 로드
const TextEditors = await IMCAT.use('text-editors');

// Rich Text Editor - WYSIWYG 에디터
const richEditor = new TextEditors.RichTextEditor('#editor', {
  placeholder: '내용을 입력하세요...',
  toolbar: ['bold', 'italic', 'underline', '|', 'heading', 'quote', '|', 
            'ul', 'ol', '|', 'link', 'image', '|', 'undo', 'redo'],
  minHeight: 200,
  maxHeight: 600,
  onChange: (html) => console.log('Content:', html),
  onFocus: () => console.log('Focused'),
  onBlur: () => console.log('Blurred')
});

// API
richEditor.getHTML();       // HTML 반환
richEditor.setHTML('&lt;p&gt;Hello&lt;/p&gt;');
richEditor.getText();       // 텍스트만 반환
richEditor.clear();
richEditor.focus();

// Markdown Editor - 마크다운 에디터
const mdEditor = new TextEditors.MarkdownEditor('#md-editor', {
  value: '# Hello\n\n마크다운 텍스트...',
  placeholder: '마크다운을 입력하세요...',
  preview: true,            // 미리보기 활성화
  splitView: true,          // 분할 뷰 (false면 탭)
  toolbar: ['bold', 'italic', '|', 'h1', 'h2', '|', 'link', 'image', 'code'],
  minHeight: 300,
  onChange: (markdown) => console.log('Markdown:', markdown)
});

// API
mdEditor.getValue();        // 마크다운 텍스트 반환
mdEditor.setValue('# New');
mdEditor.getHTML();         // 파싱된 HTML 반환
mdEditor.clear();
mdEditor.focus();

// Textarea Autosize - 자동 높이 조절
const autosize = new TextEditors.TextareaAutosize('#textarea', {
  minRows: 2,
  maxRows: 10,
  onChange: (value) => console.log('Value:', value)
});

// API
autosize.resize();          // 수동 리사이즈

// 메모리 관리
IMCAT.view.registerInstance(richEditor);
IMCAT.view.registerInstance(mdEditor);
IMCAT.view.registerInstance(autosize);</code></pre>
      </div>
    </div>
  </div>
</div>

<script type="module">
// 모듈 로드
window.TextEditorsModule = await IMCAT.use('text-editors');
const { RichTextEditor, MarkdownEditor, TextareaAutosize } = TextEditorsModule;

// Rich Text Editor 데모
window.richEditor = new RichTextEditor('#rich_editor_demo', {
  placeholder: '여기에 내용을 입력하세요...',
  minHeight: 200,
  onChange: (html) => {
    // console.log('Rich text changed');
  }
});
IMCAT.view.registerInstance(richEditor);

window.getRichContent = function() {
  const html = richEditor.getHTML();
  document.getElementById('rich_output').style.display = 'block';
  document.getElementById('rich_html').textContent = html;
};

window.clearRichEditor = function() {
  richEditor.clear();
  document.getElementById('rich_output').style.display = 'none';
};

// Markdown Editor (Split View) 데모
const sampleMarkdown = `# IMCAT UI 프레임워크

**IMCAT UI**는 현대적인 웹 애플리케이션을 위한 경량 UI 프레임워크입니다.

## 주요 기능

- 제로 빌드 - 빌드 없이 바로 사용
- 모듈화 - 필요한 것만 로드
- 다크 모드 지원
- 접근성 고려

## 코드 예제

\`\`\`javascript
const module = await IMCAT.use('feedback');
const toast = new module.Toast({
  message: '성공!'
});
\`\`\`

> 인용구도 지원합니다.

---

더 자세한 내용은 [문서](https://example.com)를 참조하세요.`;

window.markdownSplit = new MarkdownEditor('#markdown_split_demo', {
  value: sampleMarkdown,
  splitView: true,
  preview: true,
  minHeight: 400
});
IMCAT.view.registerInstance(markdownSplit);

window.getMarkdownContent = function() {
  alert(markdownSplit.getValue());
};

window.getMarkdownHTML = function() {
  console.log(markdownSplit.getHTML());
  alert('HTML이 콘솔에 출력되었습니다.');
};

window.insertSampleMarkdown = function() {
  markdownSplit.setValue(sampleMarkdown);
};

// Markdown Editor (Tab View) 데모
window.markdownTabs = new MarkdownEditor('#markdown_tabs_demo', {
  value: '# 탭 뷰 에디터\n\n편집과 미리보기 탭을 전환해보세요.',
  splitView: false,
  preview: true,
  minHeight: 300
});
IMCAT.view.registerInstance(markdownTabs);

// Textarea Autosize 데모
window.textareaAutosize = new TextareaAutosize('#autosize_demo', {
  minRows: 2,
  maxRows: 10
});
IMCAT.view.registerInstance(textareaAutosize);
</script>

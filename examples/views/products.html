<style>
  .product-filter-btn {
    background: #667eea;
    color: white;
    border: none;
    padding: 10px 16px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    margin-right: 10px;
  }
  .product-filter-btn:hover {
    background: #764ba2;
  }
  .product-filter-btn.active {
    background: #764ba2;
    font-weight: bold;
  }
  code {
    background: #f4f4f4;
    padding: 2px 6px;
    border-radius: 3px;
    font-family: monospace;
  }
  .product-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
    margin-top: 15px;
  }
  .product-item {
    background: #f8f9fa;
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #dee2e6;
  }
  .product-item h4 {
    margin-bottom: 10px;
    color: #333;
  }
  .product-item p {
    color: #666;
    font-size: 14px;
    margin-bottom: 10px;
  }
  .product-price {
    font-size: 20px;
    font-weight: bold;
    color: #667eea;
  }
  .animation-btn {
    background: #28a745;
    color: white;
    border: none;
    padding: 10px 16px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    margin: 5px 5px 5px 0;
  }
  .animation-btn:hover {
    background: #218838;
  }
</style>

<div class="page-title">ğŸ“¦ ì œí’ˆ</div>

<div class="info-box">
  <h2>ì œí’ˆ ëª©ë¡</h2>
  <p>í˜„ì¬ ì¹´í…Œê³ ë¦¬: <code id="url-params">ì „ì²´</code></p>
  
  <div style="margin: 15px 0;">
    <button class="product-filter-btn" catui-href="views/products.html?category=core">Core ì œí’ˆ</button>
    <button class="product-filter-btn" catui-href="views/products.html?category=modules">ëª¨ë“ˆ ì œí’ˆ</button>
    <button class="product-filter-btn" catui-href="views/products.html?category=all">ì „ì²´ ë³´ê¸°</button>
  </div>
</div>

<div class="info-box">
  <div id="product-list"><p style="text-align: center; color: #999;">ë¡œë”© ì¤‘...</p></div>
</div>

<div class="info-box">
  <h3>ğŸ¯ ì• ë‹ˆë©”ì´ì…˜ ë°ëª¨</h3>
  <div id="product-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; border-radius: 12px; text-align: center; margin: 15px 0;">
    <h3>IMCAT UI Framework</h3>
    <p>ê²½ëŸ‰, ê°•ë ¥, ìœ ì—°</p>
  </div>
  <div style="display: flex; gap: 5px; flex-wrap: wrap;">
    <button class="animation-btn" onclick="animateCard('fadeIn')">Fade In</button>
    <button class="animation-btn" onclick="animateCard('bounceIn')">Bounce In</button>
    <button class="animation-btn" onclick="animateCard('scaleIn')">Scale In</button>
    <button class="animation-btn" onclick="animateCard('shake')">Shake</button>
    <button class="animation-btn" onclick="animateCard('pulse')">Pulse</button>
    <button class="animation-btn" onclick="animateCard('tada')">Tada</button>
  </div>
</div>

<script>
(function() {
  // ì œí’ˆ ë°ì´í„° (ìƒìˆ˜)
  const allProducts = [
    { id: 1, name: 'IMCAT UI Core', category: 'core', price: 'Free', desc: 'í•µì‹¬ í”„ë ˆì„ì›Œí¬' },
    { id: 2, name: 'Form Validation Module', category: 'modules', price: 'Free', desc: 'í¼ ê²€ì¦ ëª¨ë“ˆ' },
    { id: 3, name: 'Animation Module', category: 'modules', price: 'Free', desc: '20+ ì• ë‹ˆë©”ì´ì…˜' },
    { id: 4, name: 'State Management', category: 'modules', price: 'Free', desc: 'ë¦¬ì•¡í‹°ë¸Œ ìƒíƒœ ê´€ë¦¬' },
    { id: 5, name: 'Storage Module', category: 'modules', price: 'Free', desc: 'LocalStorage ë˜í¼' },
    { id: 6, name: 'IMCAT UI Pro', category: 'core', price: '$29', desc: 'í”„ë¡œ ë²„ì „' },
  ];
  
  // ì¹´í…Œê³ ë¦¬ ì´ë¦„ ë§¤í•‘
  const categoryNames = {
    'core': 'Core ì œí’ˆ',
    'modules': 'ëª¨ë“ˆ ì œí’ˆ',
    'all': 'ì „ì²´'
  };

  // í˜ì´ì§€ ì´ˆê¸°í™” í•¨ìˆ˜
  function initPage() {
    // DOMì´ ì¤€ë¹„ëœ í›„ ë‹¤ìŒ í‹±ì— ì‹¤í–‰ (URLì´ í™•ì‹¤íˆ ì—…ë°ì´íŠ¸ëœ í›„)
    setTimeout(() => {
      // URL íŒŒë¼ë¯¸í„° ê°€ì ¸ì˜¤ê¸°
      const params = IMCAT.view.params();
      const category = params.category || 'all';
      
      console.log('ğŸ“¦ ì œí’ˆ í˜ì´ì§€ ë¡œë“œë¨, ì¹´í…Œê³ ë¦¬:', category);
      
      // ì¹´í…Œê³ ë¦¬ í‘œì‹œ ì—…ë°ì´íŠ¸
      document.getElementById('url-params').textContent = categoryNames[category] || 'ì „ì²´';
      
      // í™œì„± ë²„íŠ¼ í‘œì‹œ
      document.querySelectorAll('.product-filter-btn').forEach(btn => {
        btn.classList.remove('active');
        const href = btn.getAttribute('catui-href');
        if (href && href.includes(`category=${category}`)) {
          btn.classList.add('active');
        }
      });
      
      // í•„í„°ë§
      const products = category === 'all' 
        ? allProducts 
        : allProducts.filter(p => p.category === category);
      
      console.log('ğŸ“Š ì œí’ˆ ìˆ˜:', products.length);
      
      // ë Œë”ë§
      let html = '<div class="product-grid">';
      products.forEach(p => {
        html += `
          <div class="product-item">
            <h4>${p.name}</h4>
            <p>${p.desc}</p>
            <div class="product-price">${p.price}</div>
          </div>
        `;
      });
      html += '</div>';
      
      if (products.length === 0) {
        html = '<p>ì œí’ˆì´ ì—†ìŠµë‹ˆë‹¤.</p>';
      }

      document.getElementById('product-list').innerHTML = html;
    }, 0);
  }

  // í˜ì´ì§€ ì´ˆê¸°í™” ì‹¤í–‰
  initPage();

  // ì• ë‹ˆë©”ì´ì…˜ í•¨ìˆ˜ (ë‹¨ìˆœí™” ë²„ì „)
  window.animateCard = async function(animation) {
    console.log(`\nğŸ¬ ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘: ${animation}`);
    const card = document.getElementById('product-card');
    
    if (!card) {
      console.error('âŒ ì¹´ë“œ ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ!');
      return;
    }
    
    console.log(`ğŸ“Š ì´ˆê¸° ìƒíƒœ:`, {
      opacity: getComputedStyle(card).opacity,
      transform: getComputedStyle(card).transform
    });
    
    try {
      // ì• ë‹ˆë©”ì´ì…˜ ì‹¤í–‰ (ë©”ì„œë“œê°€ ëª¨ë“  ê²ƒì„ ì²˜ë¦¬)
      await IMCAT.animate(card)[animation](600);
      
      console.log(`âœ¨ ${animation} ì™„ë£Œ!`);
      console.log(`ğŸ“Š ìµœì¢… ìƒíƒœ:`, {
        opacity: getComputedStyle(card).opacity,
        transform: getComputedStyle(card).transform
      });
    } catch (error) {
      console.error(`âŒ ${animation} ì‹¤í–‰ ì¤‘ ì—ëŸ¬:`, error);
    }
  };
})();
</script>
